(window.webpackJsonp=window.webpackJsonp||[]).push([[2],[function(t,e,a){"use strict";var i={};a.r(i),a.d(i,"genName",function(){return F}),a.d(i,"natureName",function(){return Y}),a.d(i,"natureId",function(){return _}),a.d(i,"natureMultiplier",function(){return W}),a.d(i,"natureStats",function(){return V}),a.d(i,"pokemonName",function(){return j}),a.d(i,"pokemonId",function(){return z}),a.d(i,"isPokeReleased",function(){return q}),a.d(i,"releasedPokes",function(){return Q}),a.d(i,"baseStats",function(){return Z}),a.d(i,"weight",function(){return J}),a.d(i,"pokeTypes",function(){return X}),a.d(i,"pokeType1",function(){return $}),a.d(i,"pokeType2",function(){return tt}),a.d(i,"hasEvolution",function(){return et}),a.d(i,"hasPreEvolution",function(){return at}),a.d(i,"isMega",function(){return it}),a.d(i,"requiredItemForPoke",function(){return st}),a.d(i,"moveName",function(){return rt}),a.d(i,"moveId",function(){return nt}),a.d(i,"movePower",function(){return ot}),a.d(i,"isMoveReleased",function(){return ut}),a.d(i,"releasedMoves",function(){return ct}),a.d(i,"moveType",function(){return ht}),a.d(i,"moveDamageClass",function(){return lt}),a.d(i,"moveIgnoresAbilities",function(){return mt}),a.d(i,"priority",function(){return dt}),a.d(i,"minHits",function(){return pt}),a.d(i,"maxHits",function(){return ft}),a.d(i,"hitsMultipleTargets",function(){return St}),a.d(i,"zMovePower",function(){return bt}),a.d(i,"hasSecondaryEffect",function(){return yt}),a.d(i,"recoil",function(){return Mt}),a.d(i,"isOhkoMove",function(){return gt}),a.d(i,"hasBiteFlag",function(){return At}),a.d(i,"hasBulletFlag",function(){return vt}),a.d(i,"hasContactFlag",function(){return Et}),a.d(i,"hasPowderFlag",function(){return Rt}),a.d(i,"hasPulseFlag",function(){return Tt}),a.d(i,"hasPunchFlag",function(){return kt}),a.d(i,"requiresRecharge",function(){return Pt}),a.d(i,"hasSoundFlag",function(){return Dt}),a.d(i,"itemName",function(){return Bt}),a.d(i,"itemId",function(){return Ht}),a.d(i,"isItemReleased",function(){return wt}),a.d(i,"isHeavy",function(){return It}),a.d(i,"isPlate",function(){return Ot}),a.d(i,"itemBoostedType",function(){return Ct}),a.d(i,"berryTypeResist",function(){return Nt}),a.d(i,"gemType",function(){return Lt}),a.d(i,"isBerry",function(){return Ft}),a.d(i,"naturalGiftPower",function(){return xt}),a.d(i,"naturalGiftType",function(){return Gt}),a.d(i,"flingPower",function(){return Kt}),a.d(i,"megaStone",function(){return Ut}),a.d(i,"memoryType",function(){return Yt}),a.d(i,"releasedItems",function(){return _t}),a.d(i,"zMoveTransformsTo",function(){return Wt}),a.d(i,"zMoveTransformsFrom",function(){return Vt}),a.d(i,"abilityName",function(){return jt}),a.d(i,"abilityId",function(){return zt}),a.d(i,"isIgnoredByMoldBreaker",function(){return qt}),a.d(i,"isAbilityReleased",function(){return Qt}),a.d(i,"releasedAbilities",function(){return Zt}),a.d(i,"immunityType",function(){return Jt}),a.d(i,"pinchType",function(){return Xt}),a.d(i,"critArmor",function(){return $t}),a.d(i,"normalToType",function(){return te}),a.d(i,"abilityIgnoresAbilities",function(){return ee}),a.d(i,"typeName",function(){return se}),a.d(i,"typeId",function(){return re}),a.d(i,"typesForGen",function(){return ne}),a.d(i,"typeDamageClass",function(){return oe}),a.d(i,"isPhysicalType",function(){return ue}),a.d(i,"isSpecialType",function(){return ce}),a.d(i,"isLustrousType",function(){return he}),a.d(i,"isAdamantType",function(){return le}),a.d(i,"isGriseousType",function(){return me}),a.d(i,"isSoulDewType",function(){return de}),a.d(i,"isSandForceType",function(){return pe}),a.d(i,"effectiveness",function(){return Se});a(7),a(39),a(30),a(70),a(8);var s=a(133),r=a.n(s),n=a(83),o=a.n(n),u=a(33),c=a.n(u),h=a(27),l=a.n(h),m=a(84);let d;!function(t){t[t.RBY=1]="RBY",t[t.GSC=2]="GSC",t[t.ADV=3]="ADV",t[t.HGSS=4]="HGSS",t[t.B2W2=5]="B2W2",t[t.ORAS=6]="ORAS",t[t.SM=7]="SM"}(d||(d={}));const p=[d.RBY,d.GSC,d.ADV,d.HGSS,d.B2W2,d.ORAS,d.SM],f=d.SM;let S;!function(t){t[t.HP=0]="HP",t[t.ATK=1]="ATK",t[t.DEF=2]="DEF",t[t.SATK=3]="SATK",t[t.SDEF=4]="SDEF",t[t.SPD=5]="SPD",t[t.ACC=6]="ACC",t[t.EVA=7]="EVA",t[t.SPC=3]="SPC"}(S||(S={}));S.HP,S.ATK,S.DEF,S.SATK,S.SDEF,S.SPD,S.HP,S.ATK,S.DEF,S.SPC,S.SPD;let b;!function(t){t[t.NO_GENDER=0]="NO_GENDER",t[t.MALE=1]="MALE",t[t.FEMALE=2]="FEMALE"}(b||(b={}));b.NO_GENDER,b.MALE,b.FEMALE;let y;!function(t){t[t.OTHER=0]="OTHER",t[t.PHYSICAL=1]="PHYSICAL",t[t.SPECIAL=2]="SPECIAL"}(y||(y={}));y.OTHER,y.PHYSICAL,y.SPECIAL;let M;!function(t){t[t.NO_STATUS=0]="NO_STATUS",t[t.POISONED=1]="POISONED",t[t.BADLY_POISONED=2]="BADLY_POISONED",t[t.BURNED=3]="BURNED",t[t.PARALYZED=4]="PARALYZED",t[t.ASLEEP=5]="ASLEEP",t[t.FROZEN=6]="FROZEN"}(M||(M={}));const g=[M.NO_STATUS,M.POISONED,M.BADLY_POISONED,M.BURNED,M.PARALYZED,M.ASLEEP,M.FROZEN];let A;!function(t){t[t.NORMAL=0]="NORMAL",t[t.FIGHTING=1]="FIGHTING",t[t.FLYING=2]="FLYING",t[t.POISON=3]="POISON",t[t.GROUND=4]="GROUND",t[t.ROCK=5]="ROCK",t[t.BUG=6]="BUG",t[t.GHOST=7]="GHOST",t[t.STEEL=8]="STEEL",t[t.FIRE=9]="FIRE",t[t.WATER=10]="WATER",t[t.GRASS=11]="GRASS",t[t.ELECTRIC=12]="ELECTRIC",t[t.PSYCHIC=13]="PSYCHIC",t[t.ICE=14]="ICE",t[t.DRAGON=15]="DRAGON",t[t.DARK=16]="DARK",t[t.FAIRY=17]="FAIRY",t[t.CURSE=18]="CURSE"}(A||(A={}));const v=[A.NORMAL,A.FIGHTING,A.FLYING,A.POISON,A.GROUND,A.ROCK,A.BUG,A.GHOST,A.STEEL,A.FIRE,A.WATER,A.GRASS,A.ELECTRIC,A.PSYCHIC,A.ICE,A.DRAGON,A.DARK,A.FAIRY,A.CURSE];let E;!function(t){t[t.CLEAR=0]="CLEAR",t[t.HAIL=1]="HAIL",t[t.RAIN=2]="RAIN",t[t.SAND=3]="SAND",t[t.SUN=4]="SUN",t[t.HEAVY_RAIN=5]="HEAVY_RAIN",t[t.HARSH_SUN=6]="HARSH_SUN",t[t.STRONG_WINDS=7]="STRONG_WINDS"}(E||(E={}));E.CLEAR,E.SUN,E.RAIN,E.SAND,E.HAIL,E.HARSH_SUN,E.HEAVY_RAIN,E.STRONG_WINDS;let R;!function(t){t[t.HARDY=0]="HARDY",t[t.LONELY=1]="LONELY",t[t.BRAVE=2]="BRAVE",t[t.ADAMANT=3]="ADAMANT",t[t.NAUGHTY=4]="NAUGHTY",t[t.BOLD=5]="BOLD",t[t.DOCILE=6]="DOCILE",t[t.RELAXED=7]="RELAXED",t[t.IMPISH=8]="IMPISH",t[t.LAX=9]="LAX",t[t.TIMID=10]="TIMID",t[t.HASTY=11]="HASTY",t[t.SERIOUS=12]="SERIOUS",t[t.JOLLY=13]="JOLLY",t[t.NAIVE=14]="NAIVE",t[t.MODEST=15]="MODEST",t[t.MILD=16]="MILD",t[t.QUIET=17]="QUIET",t[t.BASHFUL=18]="BASHFUL",t[t.RASH=19]="RASH",t[t.CALM=20]="CALM",t[t.GENTLE=21]="GENTLE",t[t.SASSY=22]="SASSY",t[t.CAREFUL=23]="CAREFUL",t[t.QUIRKY=24]="QUIRKY"}(R||(R={}));const T=[R.HARDY,R.LONELY,R.BRAVE,R.ADAMANT,R.NAUGHTY,R.BOLD,R.DOCILE,R.RELAXED,R.IMPISH,R.LAX,R.TIMID,R.HASTY,R.SERIOUS,R.JOLLY,R.NAIVE,R.MODEST,R.MILD,R.QUIET,R.BASHFUL,R.RASH,R.CALM,R.GENTLE,R.SASSY,R.CAREFUL,R.QUIRKY];let k;!function(t){t[t.NO_TERRAIN=0]="NO_TERRAIN",t[t.GRASSY_TERRAIN=1]="GRASSY_TERRAIN",t[t.MISTY_TERRAIN=2]="MISTY_TERRAIN",t[t.ELECTRIC_TERRAIN=3]="ELECTRIC_TERRAIN",t[t.PSYCHIC_TERRAIN=4]="PSYCHIC_TERRAIN"}(k||(k={}));k.NO_TERRAIN,k.GRASSY_TERRAIN,k.MISTY_TERRAIN,k.ELECTRIC_TERRAIN,k.PSYCHIC_TERRAIN;const P=t=>Math.trunc(t)+(t%1>.5?1:0)-(t%1<-.5?1:0),D=(t,e)=>t*e+2048>>12,B=(t,e)=>P(e*t/4096),H=(t,e)=>e.map(e=>B(t,e));function w(t,e,a){const i=[];for(let s=e;s<=a;s++)i.push(Math.trunc(t*s/a));return i}const I=function(){for(var t=arguments.length,e=new Array(t),a=0;a<t;a++)e[a]=arguments[a];return e.some(t=>t>255)},O=function(t){return t>>(arguments.length>1&&void 0!==arguments[1]?arguments[1]:2)&255},C=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);function N(t,e,a){for(let a=t;a<=f;a++)if(r()(m.a[a],e))return o()(m.a[a],e);return a}const L=(t,e)=>a=>{if("string"!=typeof a)return e;const i=a.replace(/[^A-Za-z0-9]/g,"").toLowerCase();return N(f,[t,i])?i:e},F=t=>N(t,["name"],"SM"),x=[-1,0,1,3,4,2],G=[1,2,5,3,4],K={[R.HARDY]:"Hardy",[R.LONELY]:"Lonely",[R.BRAVE]:"Brave",[R.ADAMANT]:"Adamant",[R.NAUGHTY]:"Naughty",[R.BOLD]:"Bold",[R.DOCILE]:"Docile",[R.RELAXED]:"Relaxed",[R.IMPISH]:"Impish",[R.LAX]:"Lax",[R.TIMID]:"Timid",[R.HASTY]:"Hasty",[R.SERIOUS]:"Serious",[R.JOLLY]:"Jolly",[R.NAIVE]:"Naive",[R.MODEST]:"Modest",[R.MILD]:"Mild",[R.QUIET]:"Quiet",[R.BASHFUL]:"Bashful",[R.RASH]:"Rash",[R.CALM]:"Calm",[R.GENTLE]:"Gentle",[R.SASSY]:"Sassy",[R.CAREFUL]:"Careful",[R.QUIRKY]:"Quirky"},U={hardy:R.HARDY,lonely:R.LONELY,brave:R.BRAVE,adamant:R.ADAMANT,naughty:R.NAUGHTY,bold:R.BOLD,docile:R.DOCILE,relaxed:R.RELAXED,impish:R.IMPISH,lax:R.LAX,timid:R.TIMID,hasty:R.HASTY,serious:R.SERIOUS,jolly:R.JOLLY,naive:R.NAIVE,modest:R.MODEST,mild:R.MILD,quiet:R.QUIET,bashful:R.BASHFUL,rash:R.RASH,calm:R.CALM,gentle:R.GENTLE,sassy:R.SASSY,careful:R.CAREFUL,quirky:R.QUIRKY},Y=t=>K[t],_=t=>c()(U[t.trim().toLowerCase()],R.HARDY),W=(t,e)=>(Math.trunc(t/5)===x[e]?1:0)-(t%5===x[e]?1:0),V=t=>Math.trunc(t/5)===t%5?[-1,-1]:[G[Math.trunc(t/5)],G[t%5]],j=t=>N(f,["pokedex",t,"b"],"(No Pokemon)"),z=L("pokedex","nopokemon"),q=(t,e)=>e>=N(f,["pokedex",t,"a"]),Q=t=>Object.keys(N(f,["pokedex"],{})).filter(e=>q(e,t)).sort(),Z=(t,e)=>N(e,["pokedex",t,"c"]),J=(t,e)=>N(e,["pokedex",t,"d"]),X=(t,e)=>N(e,["pokedex",t,"e"],[A.CURSE]),$=(t,e)=>c()(X(t,e)[0],A.CURSE),tt=(t,e)=>c()(X(t,e)[1],A.CURSE),et=(t,e)=>{return N(e,["pokedex",t,"f"],[]).some(t=>q(t,e))},at=(t,e)=>{const a=N(e,["pokedex",t,"i"],t),i=N(e,["pokedex",a,"g"]);return Boolean(i&&q(i,e))},it=(t,e)=>Boolean(N(e,["pokedex",t,"h"])),st=(t,e)=>N(e,["pokedex",t,"j"],"noitem"),rt=t=>N(f,["moves",t,"b"],"(No Move)"),nt=L("moves","nomove"),ot=(t,e)=>N(e,["moves",t,"c"],0),ut=(t,e)=>e>=N(f,["moves",t,"a"]),ct=t=>Object.keys(N(f,["moves"],{})).filter(e=>ut(e,t)).sort(),ht=(t,e)=>N(e,["moves",t,"d"],A.CURSE),lt=(t,e)=>N(e,["moves",t,"e"],y.OTHER),mt=(t,e)=>Boolean(N(e,["moves",t,"f"])),dt=(t,e)=>N(e,["moves",t,"g"],0),pt=(t,e)=>N(e,["moves",t,"i","0"],1),ft=(t,e)=>N(e,["moves",t,"i","1"],1),St=(t,e)=>Boolean(N(e,["moves",t,"j"])),bt=(t,e)=>N(e,["moves",t,"k"]),yt=(t,e)=>Boolean(N(e,["moves",t,"l"])),Mt=(t,e)=>N(e,["moves",t,"m"],0),gt=(t,e)=>Boolean(N(e,["moves",t,"n"])),At=(t,e)=>Boolean(N(e,["moves",t,"A"])),vt=(t,e)=>Boolean(N(e,["moves",t,"B"])),Et=(t,e)=>Boolean(N(e,["moves",t,"D"])),Rt=(t,e)=>Boolean(N(e,["moves",t,"E"])),Tt=(t,e)=>Boolean(N(e,["moves",t,"F"])),kt=(t,e)=>Boolean(N(e,["moves",t,"G"])),Pt=(t,e)=>Boolean(N(e,["moves",t,"H"])),Dt=(t,e)=>Boolean(N(e,["moves",t,"I"])),Bt=t=>N(f,["items",t,"b"],"(No Item)"),Ht=L("items","noitem"),wt=(t,e)=>e>=N(f,["items",t,"a"]),It=(t,e)=>Boolean(N(e,["items",t,"j"])),Ot=(t,e)=>Boolean(N(e,["items",t,"g"])),Ct=(t,e)=>N(e,["items",t,"k"],-1),Nt=(t,e)=>N(e,["items",t,"l"],-1),Lt=(t,e)=>N(e,["items",t,"m"],-1),Ft=(t,e)=>Boolean(N(e,["items",t,"n"])),xt=(t,e)=>N(e,["items",t,"c","0"],0),Gt=(t,e)=>N(e,["items",t,"c","1"],-1),Kt=(t,e)=>N(e,["items",t,"d"],10),Ut=(t,e)=>N(e,["items",t,"e"],"nopokemon"),Yt=(t,e)=>N(e,["items",t,"i"],A.NORMAL),_t=t=>Object.keys(N(f,["items"],{})).filter(e=>wt(e,t)).sort(),Wt=(t,e)=>N(e,["items",t,"o","0"]),Vt=(t,e)=>N(e,["items",t,"o","1"]),jt=t=>N(f,["abilities",t,"b"],"(No Ability)"),zt=L("abilities","noability"),qt=(t,e)=>Boolean(N(e,["abilities",t,"c"])),Qt=(t,e)=>e>=N(f,["abilities",t,"a"]),Zt=t=>Object.keys(N(f,["abilities"],{})).filter(e=>Qt(e,t)).sort(),Jt=(t,e)=>N(e,["abilities",t,"d"],-1),Xt=(t,e)=>N(e,["abilities",t,"e"],-1),$t=(t,e)=>Boolean(N(e,["abilities",t,"f"])),te=(t,e)=>N(e,["abilities",t,"g"],-1),ee=(t,e)=>Boolean(N(e,["abilities",t,"h"])),ae={[A.NORMAL]:"Normal",[A.FIGHTING]:"Fighting",[A.FLYING]:"Flying",[A.POISON]:"Poison",[A.GROUND]:"Ground",[A.ROCK]:"Rock",[A.BUG]:"Bug",[A.GHOST]:"Ghost",[A.STEEL]:"Steel",[A.FIRE]:"Fire",[A.WATER]:"Water",[A.GRASS]:"Grass",[A.ELECTRIC]:"Electric",[A.PSYCHIC]:"Psychic",[A.ICE]:"Ice",[A.DRAGON]:"Dragon",[A.DARK]:"Dark",[A.FAIRY]:"Fairy",[A.CURSE]:"Curse"},ie={normal:A.NORMAL,fighting:A.FIGHTING,flying:A.FLYING,poison:A.POISON,ground:A.GROUND,rock:A.ROCK,bug:A.BUG,ghost:A.GHOST,steel:A.STEEL,fire:A.FIRE,water:A.WATER,grass:A.GRASS,electric:A.ELECTRIC,psychic:A.PSYCHIC,ice:A.ICE,dragon:A.DRAGON,dark:A.DARK,fairy:A.FAIRY,curse:A.CURSE},se=t=>ae[t],re=t=>c()(ie[t.trim().toLowerCase()],A.CURSE),ne=t=>v.filter(e=>t<d.GSC&&e!==A.STEEL).filter(e=>t<d.GSC&&e!==A.DARK).filter(e=>t<d.ORAS&&e!==A.FAIRY).sort((t,e)=>t-e),oe=t=>t>=A.FIRE&&t<=A.DARK?y.SPECIAL:y.PHYSICAL,ue=t=>oe(t)===y.PHYSICAL,ce=t=>oe(t)===y.SPECIAL,he=t=>t===A.WATER||t===A.DRAGON,le=t=>t===A.STEEL||t===A.DRAGON,me=t=>t===A.GHOST||t===A.DRAGON,de=t=>t===A.PSYCHIC||t===A.DRAGON,pe=t=>t===A.GROUND||t===A.ROCK||t===A.STEEL,fe=(t,e,a)=>{const i=N(a.gen,["typechart",e,t],2);return a.inverted?i<2?4:i>2?1:2:0===i&&e===A.GHOST&&(a.foresight||a.scrappy)?2:i>2&&e===A.FLYING&&a.strongWinds?2:i},Se=function(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{gen:f};const i=l()(t);let s=l()(e);if(a.grounded&&(s=s.filter(t=>t!==A.FLYING)),void 0!==a.immunity&&i.includes(a.immunity)&&(!a.grounded||a.immunity!==A.GROUND))return[0,1];let r=1;for(const t of s)if(a.freezeDry&&t===A.WATER)r*=2*2**i.length;else for(const e of i)r*=fe(e,t,a);if(0===r)return[0,1];const n=Math.log2(r),o=i.length*s.length;return[2**Math.max(0,n-o),2**Math.max(0,o-n)]};a(26);var be=a(134),ye=a.n(be),Me=a(16);function ge(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=[],i=!0,s=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(i=(n=o.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){s=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(s)throw r}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var Ae=Symbol.iterator;class ve{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];var e,a,i;if(i=void 0,(a="data")in(e=this)?Object.defineProperty(e,a,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[a]=i,t instanceof ve)this.data=new Map(t.data);else{this.data=new Map;for(const e of t)this.add(e)}}add(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Me.one;return this.data.set(t,(this.data.get(t)||Me.zero).add(e)),this}clear(){this.data.clear()}count(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:()=>!0,e=Me.zero;for(const i of this){var a=ge(i,2);const s=a[0],r=a[1];t(s,r)&&(e=e.add(r))}return e}delete(t){return this.data.delete(t)}*entries(){yield*this.data}every(t){for(const e of this)if(!t(...e))return!1;return!0}has(t){return this.data.has(t)}get(t){return this.data.get(t)}intersect(t){const e=t instanceof ve?t:new ve(t),a=new ve;for(const t of this){var i=ge(t,2);const s=i[0],r=i[1],n=e.get(s);void 0!==n&&(r.leq(n)?a.add(s,r):a.add(s,e.get(s)))}return a}isEmpty(){return 0===this.data.size}*keys(){yield*this.data.keys()}map(t){let e=!1;function a(){e=!0}const i=new ve;for(const s of this){const r=t(s[0],s[1],a);e?e=!1:i.add(r,s[1])}return i}max(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e)=>t>e?1:0;const a=this.values(),i=a.next();if(i.done)return t;let s=i.value;for(const t of a)e(t,s)>0&&(s=t);return s}min(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e)=>t>e?1:0;const a=this.values(),i=a.next();if(i.done)return t;let s=i.value;for(const t of a)e(t,s)<=0&&(s=t);return s}permute(t,e){const a=t instanceof ve?t:new ve(t),i=new ve;for(const t of this){var s=ge(t,2);const n=s[0],o=s[1];for(const t of a){var r=ge(t,2);const a=r[0],s=r[1];i.add(e(n,a),o.multiply(s))}}return i}get size(){let t=Me.zero;for(const e of this.multiplicities())t=t.add(e);return t}reduce(t,e){let a=e;for(const e of this)a=t(a,e[0],e[1]);return a}scale(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me.one;const e=new ve;for(const i of this){var a=ge(i,2);const s=a[0],r=a[1];e.add(s,r.multiply(t))}return e}simplify(){const t=new ve,e=this.multiplicities(),a=e.next();if(a.done)return t;let i=a.value;for(const t of e)i=Me.gcd(i,t);for(const e of this){var s=ge(e,2);const a=s[0],r=s[1];t.add(a,r.divide(i))}return t}some(t){for(const e of this)if(t(...e))return!0;return!1}toArray(){const t=Array(Number(this.size));let e=0;for(const i of this){var a=ge(i,2);const s=a[0],r=a[1],n=Number(r);t.fill(s,e,e+n),e+=n}return t}toString(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t=>t.join(":"),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t,e)=>{let a=ge(t,1)[0],i=ge(e,1)[0];return(a>i?1:0)-(i>a?1:0)};return Array.from(this).sort(e).map(t).join(", ")}union(t){const e=t instanceof ve?t:new ve(t),a=new ve(this);for(const t of e)a.add(...t);return a}*values(){yield*this.data.keys()}*multiplicities(){yield*this.data.values()}*[Ae](){yield*this.data}static average(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;const a=t.size;if(a.isZero())return NaN;const i=10**(e+1),s=t.reduce((t,e,a)=>t.add(a.multiply(e)),Me.zero).multiply(i).divide(a).valueOf();return 10*Math.round(s/10)/i}static fromEntries(t){const e=new ve;for(const a of t)e.add(...a);return e}static weightedUnion(t,e){const a=t.reduce((t,e)=>t.multiply(e.size),Me.one);let i=new ve;for(let s=0;s<t.length;s++){if(!e[s])continue;const r=a.divide(t[s].size).multiply(e[s]),n=t[s].scale(r);i=i.union(n)}return i.simplify()}}a(79);var Ee=a(5),Re=a.n(Ee);function Te(t,e){if(null==t)return{};var a,i,s=function(t,e){if(null==t)return{};var a,i,s={},r=Object.keys(t);for(i=0;i<r.length;i++)a=r[i],e.indexOf(a)>=0||(s[a]=t[a]);return s}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)a=r[i],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(s[a]=t[a])}return s}function ke(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const Pe={[A.NORMAL]:"Breakneck Blitz",[A.FIGHTING]:"All-Out Pummeling",[A.FLYING]:"Supersonic Skystrike",[A.POISON]:"Acid Downpour",[A.GROUND]:"Tectonic Rage",[A.ROCK]:"Continental Crush",[A.BUG]:"Savage Spin-Out",[A.GHOST]:"Never-Ending Nightmare",[A.STEEL]:"Corkscrew Crash",[A.FIRE]:"Inferno Overdrive",[A.WATER]:"Hydro Vortex",[A.GRASS]:"Bloom Doom",[A.ELECTRIC]:"Gigavolt Havoc",[A.PSYCHIC]:"Shattered Psyche",[A.ICE]:"Subzero Slammer",[A.DRAGON]:"Devastating Drake",[A.DARK]:"Black Hole Eclipse",[A.FAIRY]:"Twinkle Tackle"},De=[S.SPD,S.SATK,S.HP,S.DEF,S.SDEF,S.ATK];function Be(t,e){for(const a of De)if(t[a]!==e[a])return e[a]-t[a];return 0}class He{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ke(this,"gen",f),ke(this,"id","nomove"),ke(this,"user",void 0),ke(this,"target",void 0),ke(this,"critical",!1),ke(this,"zMove",!1),ke(this,"secondHit",!1),ke(this,"meFirst",!1),ke(this,"roundBoost",!1),ke(this,"minimize",!1),ke(this,"dig",!1),ke(this,"dive",!1),ke(this,"fly",!1),ke(this,"previouslyFainted",!1),ke(this,"fusionFlare",!1),ke(this,"fusionBolt",!1),ke(this,"pledgeBoost",!1),ke(this,"defenseCurl",!1),ke(this,"magnitude",2),ke(this,"tripleKickCount",0),ke(this,"rollout",0),ke(this,"beatUpHit",0),ke(this,"numberOfHits",0),ke(this,"furyCutter",0),ke(this,"echoedVoice",0),ke(this,"trumpPP",5),ke(this,"present",-1);const e=t.id,a=t.name,i=t.numberOfHits,s=Te(t,["id","name","numberOfHits"]);Object.assign(this,s),"string"==typeof e?this.id=nt(e):"string"==typeof a&&(this.name=a),void 0===i&&this.user?"Skill Link"===this.user.ability.name?this.numberOfHits=ft(this.id,this.gen):"Water Shuriken"===this.name&&"Greninja-Ash"===this.user.name&&(this.numberOfHits=3):void 0!==i&&(this.numberOfHits=i)}get name(){if(this.zMove&&this.user){const t=this.user.item.zMoveTransformsTo(),e=this.user.item.zMoveTransformsFrom();if(t&&this.id===e)return rt(t)}if(this.zMove){const t=Pe[this.type()];if(void 0!==t)return t}return rt(this.id)}set name(t){this.id=nt(t)}power(){if(this.zMove){const t=this.user&&this.user.item.zMoveTransformsFrom(),e=this.user&&this.user.item.zMoveTransformsTo();return this.id===t&&e?ot(e,this.gen):bt(this.id,this.gen)}return ot(this.id,this.gen)}type(){return ht(this.id,this.gen)}damageClass(){return lt(this.id,this.gen)}isPhysical(){return this.damageClass()===y.PHYSICAL}isSpecial(){return this.damageClass()===y.SPECIAL}isOther(){return this.damageClass()===y.OTHER}priority(){return dt(this.id,this.gen)}isPsyshockLike(){return["Psyshock","Psystrike","Secret Sword"].includes(this.name)}hasRecoil(){return Boolean(Mt(this.id,this.gen))}affectedBySheerForce(){return yt(this.id,this.gen)}isPunch(){return kt(this.id,this.gen)}isContact(){return Et(this.id,this.gen)}isSound(){return Dt(this.id,this.gen)}isPowder(){return Rt(this.id,this.gen)}isBite(){return At(this.id,this.gen)}isPulse(){return Tt(this.id,this.gen)}isBall(){return vt(this.id,this.gen)}minHits(){return pt(this.id,this.gen)}maxHits(){return ft(this.id,this.gen)}hitsMultipleTimes(){return this.maxHits()>1}hasMultipleTargets(){return St(this.id,this.gen)}isOhko(){return gt(this.id,this.gen)}isExplosion(){return["Explosion","Mind Blown","Self-Destruct"].includes(this.name)}requiresRecharge(){return Pt(this.id,this.gen)}isRecklessBoosted(){return this.hasRecoil()||"Jump Kick"===this.name||"High Jump Kick"===this.name}canCrit(){return this.gen>=d.HGSS||!["Reversal","Flail","Future Sight","Doom Desire","Spit Up"].includes(this.name)}affectedByParentalBond(){return!["Endeavor","Explosion","Final Gambit","Fling","Self-Destruct"].includes(this.name)}optimalHappiness(){return"Return"===this.name?255:0}usesHappiness(){return"Return"===this.name||"Frustration"===this.name}ignoresAbilities(){return mt(this.id,this.gen)}ignoresDefenseBoosts(){return["Chip Away","Sacred Sword","Darkest Lariat"].includes(this.name)}boostedByDig(){return"Earthquake"===this.name||"Magnitude"===this.name}boostedByDive(){return"Surf"===this.name||"Whirlpool"===this.name}boostedByFly(){return"Gust"===this.name||"Twister"===this.name}boostedByMinimize(){switch(this.name){case"Stomp":return this.gen>=d.GSC;case"Astonish":case"Extrasensory":case"Needle Arm":return this.gen===d.ADV;case"Steamroller":return this.gen>=d.B2W2;case"Body Slam":case"Dragon Rush":case"Flying Press":case"Shadow Force":case"Phantom Force":return this.gen>=d.ORAS;case"Heavy Slam":return this.gen>=d.SM;default:return!1}}weakenedByGrassyTerrain(){return["Bulldoze","Earthquake","Magnitude"].includes(this.name)}usesMaxAttackingStat(){return["Photon Geyser","Light That Burns the Sky"].includes(this.name)}isHiddenPower(){return this.name.startsWith("Hidden Power")}static hiddenPowers(t,e){if(e<d.ADV){if(t<A.FIGHTING||t>A.DARK)return[];const e=t-1;return[[(4&e)<<1|(1&e)<<2|3,e>>2|12,3&e|12,15,15,15]]}if(e<d.SM){const e=[];for(let a=0;a<64;a++){const i=[1&a?31:30,2&a?31:30,4&a?31:30,8&a?31:30,16&a?31:30,32&a?31:30];t===He.hiddenPowerType(i,d.ORAS)&&e.push(i)}return e.sort(Be)}return[[31,31,31,31,31,31]]}static hiddenPowerBp(t,e){if(e<d.ADV){const e=t[S.SPC]>>3|t[S.SPD]>>2&2|t[S.DEF]>>1&4|8&t[S.ATK];return 31+Math.trunc((5*e+(3&t[S.SPC]))/2)}if(e<d.ORAS){const e=(2&t[S.HP])>>1|2&t[S.ATK]|(2&t[S.DEF])<<1|(2&t[S.SPD])<<2|(2&t[S.SATK])<<3|(2&t[S.SDEF])<<4;return 30+Math.trunc(40*e/63)}return 60}static hiddenPowerType(t,e){if(e<d.ADV)return 1+((3&t[S.ATK])<<2|3&t[S.DEF]);const a=1&t[S.HP]|(1&t[S.ATK])<<1|(1&t[S.DEF])<<2|(1&t[S.SPD])<<3|(1&t[S.SATK])<<4|(1&t[S.SDEF])<<5;return 1+Math.trunc(15*a/63)}static flail(t,e,a){if(a===d.HGSS){const a=Math.trunc(64*t/e);return a<2?200:a<6?150:a<13?100:a<22?80:a<43?40:20}const i=Math.trunc(48*t/e);return i<=1?200:i<=4?150:i<=9?100:i<=16?80:i<=32?40:20}static magnitude(t){return[10,30,50,70,90,110,150][t-4]}static weatherBall(t){return t===E.SUN||t===E.HARSH_SUN?A.FIRE:t===E.RAIN||t===E.HEAVY_RAIN?A.WATER:t===E.SAND?A.ROCK:t===E.HAIL?A.ICE:A.NORMAL}static trumpCard(t){return[200,80,60,50,40][Re()(t,0,4)]}static electroBall(t,e){const a=Math.floor(t/Math.max(1,e));return a>=4?150:a>=3?120:a>=2?80:a>=1?60:40}static gyroBall(t,e){return Math.min(150,Math.trunc(25*e/Math.max(t,1)))}static grassKnot(t){return t>=2e3?120:t>=1e3?100:t>=500?80:t>=250?60:t>=100?40:20}static heavySlam(t,e){const a=Math.trunc(t/e);return a>=5?120:4===a?100:3===a?80:2===a?60:40}static punishment(t){let e=0;for(const a of t.slice(1,8))a>0&&(e+=a);return Math.min(120,60+20*e)}static storedPower(t){let e=0;for(const a of t.slice(1,8))a>0&&(e+=a);return 20+20*e}static frustration(t){return Math.max(1,Math.trunc(10*(255-t)/25))}static return(t){return Math.max(1,Math.trunc(10*t/25))}static eruption(t,e){return Math.max(1,Math.trunc(150*t/e))}}var we=(t,e,a,i)=>{const s=i.gen,r=function(t,e,a,i){const s=i.gen;if(i.psychicTerrain()&&a.priority()>0&&e.isGrounded(i))return{fail:!0};const r={type:a.type(),power:a.power()};switch(a.name){case"Assurance":t.damagedPreviously&&(r.power*=2);break;case"Avalanche":case"Revenge":t.damagedPreviously&&!t.damagedByPainSplit&&(r.power*=2);break;case"Beat Up":if(s<=d.HGSS)r.type=A.CURSE;else{const e=t.beatUpStats[a.beatUpHit];r.power=Math.trunc(e/10)+5}break;case"Brine":2*e.currentHp<=e.stat(S.HP)&&(r.power*=2);break;case"Echoed Voice":r.power=Math.min(200,40+40*a.echoedVoice);break;case"Electro Ball":r.power=He.electroBall(t.speed(i),e.speed(i));break;case"Facade":t.status!==M.NO_STATUS&&(r.power*=2);break;case"Fire Pledge":case"Water Pledge":case"Grass Pledge":a.pledgeBoost&&(r.power*=2);break;case"Flail":case"Reversal":r.power=He.flail(t.currentHp,t.stat(S.HP),s);break;case"Fling":r.power=t.item.flingPower();break;case"Frustration":r.power=He.frustration(t.happiness);break;case"Fury Cutter":r.power=Math.min(160,r.power*2**a.furyCutter);break;case"Future Sight":case"Doom Desire":s<=d.HGSS&&(r.type=A.CURSE);break;case"Gyro Ball":r.power=He.gyroBall(t.speed(i),e.speed(i));break;case"Hex":e.status&&(r.power*=2);break;case"Heavy Slam":case"Heat Crash":r.power=He.heavySlam(t.weight(),e.weight());break;case"Judgment":t.item.isPlate()&&(r.type=t.item.boostedType());break;case"Low Kick":case"Grass Knot":r.power=He.grassKnot(e.weight());break;case"Magnitude":r.power=He.magnitude(a.magnitude);break;case"Natural Gift":if(t.item.disabled||!t.item.isBerry())return{fail:!0};r.type=t.item.naturalGiftType(),r.power=t.item.naturalGiftPower();break;case"Present":r.power=40*a.present;break;case"Payback":e.movedFirst&&(r.power*=2);break;case"Punishment":r.power=He.punishment(e.boosts);break;case"Pursuit":s>=d.ADV&&e.switchedOut&&(r.power*=2);break;case"Return":r.power=He.return(t.happiness);break;case"Rollout":case"Ice Ball":r.power*=2**((a.rollout-1)%5+(a.defenseCurl?1:0));break;case"Round":a.roundBoost&&(r.power*=2);break;case"Smelling Salts":e.isParalyzed()&&(r.power*=2);break;case"Spit Up":if(0===t.stockpile)return{fail:!0};r.power*=t.stockpile;break;case"Stored Power":case"Power Trip":r.power=He.storedPower(t.boosts);break;case"Triple Kick":r.power*=a.tripleKickCount;break;case"Trump Card":r.power=He.trumpCard(a.trumpPP);break;case"Wake-Up Slap":e.isAsleep()&&(r.power*=2);break;case"Water Shuriken":"Greninja-Ash"===t.name&&(r.power=20);break;case"Water Spout":case"Eruption":r.power=He.eruption(t.currentHp,t.stat(S.HP));break;case"Weather Ball":r.type=He.weatherBall(i.effectiveWeather()),s>=d.HGSS&&r.type!==A.NORMAL&&(r.power*=2);break;case"Wring Out":case"Crush Grip":{const t=120*e.currentHp/e.stat(S.HP);r.power=s<=d.HGSS?1+Math.trunc(t):Math.max(1,P(t));break}default:a.isHiddenPower()&&(r.type===A.NORMAL&&(r.type=He.hiddenPowerType(t.ivs,s)),r.power=He.hiddenPowerBp(t.ivs,s)),s>=d.B2W2&&(a.fly&&a.boostedByFly()?r.power*=2:"Liquid Voice"===t.ability.name&&a.isSound()?r.type=A.WATER:"Multi-Attack"===a.name&&(r.type=t.item.memoryType()))}"Normalize"===t.ability.name&&(r.type=A.NORMAL);return r}(t,e,a,i);if(r.fail||0===r.power)return{fail:!0};const n=r.type;let o=n,u=r.power;(i.ionDeluge&&o===A.NORMAL||t.electrify)&&(o=A.ELECTRIC),o===A.NORMAL&&t.ability.normalToType()>-1&&(o=t.ability.normalToType());const c=[o];"Flying Press"===a.name&&c.push(A.FLYING);const h=Se(c,e.types(),{gen:s,foresight:e.foresight,grounded:e.isGrounded(i)||"Thousand Arrows"===a.name,immunity:e.ability.immunityType(),scrappy:"Scrappy"===t.ability.name,freezeDry:"Freeze-Dry"===a.name,inverted:i.invertedBattle,strongWinds:i.strongWinds()}),l=h[0]>h[1],m=h[0]<h[1];if(d.GSC<=s&&s<=d.ADV)(a.dig&&a.boostedByDig()||a.dive&&a.boostedByDive()||a.fly&&a.boostedByFly())&&(u*=2),i.mudSport&&o===A.ELECTRIC&&(u=Math.trunc(u/2)),i.waterSport&&o===A.FIRE&&(u=Math.trunc(u/2)),t.pinchAbilityActivated(o)&&(u=Math.trunc(3*u/2));else if(s===d.HGSS){switch((a.dig&&a.boostedByDig()||a.dive&&a.boostedByDive()||a.fly&&a.boostedByFly()||a.minimize&&a.boostedByMinimize())&&(u*=2),t.helpingHand&&(u=Math.trunc(3*u/2)),t.item.name){case"Muscle Band":a.isPhysical()&&(u=Math.trunc(11*u/10));break;case"Wise Glasses":a.isSpecial()&&(u=Math.trunc(11*u/10));break;case"Adamant Orb":"Dialga"===t.name&&le(o)&&(u=Math.trunc(12*u/10));break;case"Lustrous Orb":"Palkia"===t.name&&he(o)&&(u=Math.trunc(12*u/10));break;case"Griseous Orb":t.name.startsWith("Giratina")&&me(o)&&(u=Math.trunc(12*u/10));break;default:o===t.item.boostedType()&&(u=Math.trunc(12*u/10))}switch(t.charge&&o===A.ELECTRIC&&(u*=2),t.ability.name){case"Rivalry":t.gender&&e.gender&&(u*=t.gender===e.gender?3:5,u=Math.trunc(u/4));break;case"Reckless":a.isRecklessBoosted()&&(u=Math.trunc(12*u/10));break;case"Iron Fist":a.isPunch()&&(u=Math.trunc(12*u/10));break;case"Technician":u<=60&&(u=Math.trunc(3*u/2))}switch(e.ability.name){case"Heatproof":o===A.FIRE&&(u=Math.trunc(u/2));break;case"Thick Fat":o!==A.FIRE&&o!==A.ICE||(u=Math.trunc(u/2));break;case"Dry Skin":o===A.FIRE&&(u=Math.trunc(5*u/4))}(i.mudSport&&o===A.ELECTRIC||i.waterSport&&o===A.FIRE)&&(u=Math.trunc(u/2))}else if(s>=d.B2W2){const r=o===t.item.gemType();t.item.used=t.item.used||r,"Acrobatics"===a.name&&"(No Item)"===t.item.name&&(u*=2);let c=4096;switch(t.ability.name){case"Technician":u<=60&&(c=D(6144,c));break;case"Flare Boost":t.isBurned()&&a.isSpecial()&&(c=D(6144,c));break;case"Analytic":e.movedFirst&&(c=D(5325,c));break;case"Reckless":a.isRecklessBoosted()&&(c=D(4915,c));break;case"Iron Fist":a.isPunch()&&(c=D(4915,c));break;case"Toxic Boost":(t.isPoisoned()||t.isBadlyPoisoned())&&a.isPhysical()&&(c=D(6144,c));break;case"Rivalry":t.gender&&e.gender&&(c=D(t.gender===e.gender?3072:5120,c));break;case"Sand Force":i.sand()&&pe(o)&&(c=D(5325,c));break;case"Tough Claws":a.isContact()&&(c=D(5461,c));break;case"Strong Jaw":a.isBite()&&(c=D(6144,c));break;case"Mega Launcher":a.isPulse()&&(c=D(6144,c));break;case"Parental Bond":if(a.secondHit){const t=s<=d.ORAS?2048:1024;c=D(t,c)}break;case"Steelworker":o===A.STEEL&&(c=D(6144,c));break;case"Water Bubble":o===A.WATER&&(c=D(6144,c));break;case"Neuroforce":l&&(c=D(4915,c));break;default:n===A.NORMAL&&t.ability.normalToType()>-1&&(c=D(5325,c))}if(o===A.FIRE)switch(e.ability.name){case"Heatproof":case"Water Bubble":c=D(2048,c);break;case"Dry Skin":c=D(5120,c)}switch("Sheer Force"===t.ability.name&&a.affectedBySheerForce()&&(c=D(5325,c)),t.item.name){case"Muscle Band":a.isPhysical()&&(c=D(4505,c));break;case"Wise Glasses":a.isSpecial()&&(c=D(4505,c));break;case"Adamant Orb":"Dialga"===t.name&&le(o)&&(c=D(4915,c));break;case"Lustrous Orb":"Palkia"===t.name&&he(o)&&(c=D(4915,c));break;case"Griseous Orb":t.name.startsWith("Giratina")&&me(o)&&(c=D(4915,c));break;case"Soul Dew":s>=d.SM&&de(o)&&("Latias"===t.name||"Latios"===t.name)&&(c=D(4915,c));break;default:if(r){const t=s===d.B2W2?6144:5325;c=D(t,c)}else o===t.item.boostedType()&&(c=D(4915,c))}switch(a.name){case"Facade":t.status&&(c=D(8192,c));break;case"Brine":2*e.currentHp<=e.stat(S.HP)&&(c=D(8192,c));break;case"Venoshock":(t.isPoisoned()||t.isBadlyPoisoned())&&(c=D(8192,c));break;case"Retaliate":a.previouslyFainted&&(c=D(8192,c));break;case"Fusion Bolt":a.fusionFlare&&(c=D(8192,c));break;case"Fusion Flare":a.fusionBolt&&(c=D(8192,c));break;case"Knock Off":s>=d.ORAS&&e.knockOffBoost()&&(c=D(6144,c))}if(a.meFirst&&(c=D(6144,c)),"Solar Beam"!==a.name||i.sun()||i.isClearWeather()||(c=D(2048,c)),t.charge&&o===A.ELECTRIC&&(c=D(8192,c)),t.helpingHand&&(c=D(6144,c)),(i.waterSport&&o===A.FIRE||i.mudSport&&o===A.ELECTRIC)&&(c=D(1352,c)),i.fairyAura&&o===A.FAIRY||i.darkAura&&o===A.DARK){const t=i.auraBreak?3072:5447;c=D(t,c)}u=Math.max(1,B(c,u))}return{moveType:o,movePower:u,effectiveness:h,superEffective:l,notVeryEffective:m}};const Ie={[A.NORMAL]:0,[A.FIGHTING]:1,[A.FLYING]:2,[A.POISON]:3,[A.GROUND]:4,[A.ROCK]:5,[A.BUG]:7,[A.GHOST]:8,[A.STEEL]:9,[A.FIRE]:20,[A.WATER]:21,[A.GRASS]:22,[A.ELECTRIC]:23,[A.PSYCHIC]:24,[A.ICE]:25,[A.DRAGON]:26,[A.DARK]:27};const Oe=(t,e)=>t+e,Ce={[d.RBY]:(t,e,a,i)=>{const s=we(t,e,a,i);if(s.fail||0===s.effectiveness[0])return[0];const r=s.moveType,n=s.movePower,o=s.effectiveness;let u,c,h,l,m,d,p;a.critical?(u=2*t.level,c=t.stat(S.ATK),h=e.stat(S.DEF),l=t.stat(S.SPC),m=e.stat(S.SPC)):(u=t.level,c=t.boostedStat(S.ATK),h=e.boostedStat(S.DEF),l=t.boostedStat(S.SPC),m=e.boostedStat(S.SPC),t.isBurned()&&(c=Math.trunc(c/2)),e.reflect&&(h*=2),e.lightScreen&&(m*=2)),I(c,h)&&(c=Math.max(1,O(c)),h=O(h)),I(l,m)&&(l=Math.max(1,O(l)),m=O(m)),a.isExplosion()&&(h=Math.trunc(h/2)),ue(r)?(d=c,p=h):(d=l,p=m),p=Math.max(1,p);let f=Math.trunc(Math.trunc(Math.trunc(2*u/5+2)*n*d/p)/50);return f=Math.min(997,f)+2,t.stab(r)&&(f=Math.trunc(3*f/2)),w(f=Math.trunc(f*o[0]/o[1]),217,255)},[d.GSC]:(t,e,a,i)=>{const s=we(t,e,a,i);if(s.fail||0===s.effectiveness[0])return[0];const r=s.moveType,n=s.movePower,o=s.effectiveness;let u=t.level;const c=t.boost(S.ATK),h=e.boost(S.DEF),l=t.boost(S.SATK),m=e.boost(S.SDEF);let d,p,f,b,y,M;if(a.critical&&c<=h?(d=t.stat(S.ATK),p=e.stat(S.DEF)):(d=t.boostedStat(S.ATK),p=e.boostedStat(S.DEF),t.isBurned()&&(d=Math.trunc(d/2)),e.reflect&&(p*=2)),a.critical&&l<=m?(f=t.stat(S.SATK),b=e.stat(S.SDEF)):(f=t.boostedStat(S.SATK),b=e.boostedStat(S.SDEF),e.lightScreen&&(b*=2)),t.thickClubBoosted()&&(d*=2),t.lightBallBoosted()&&(f*=2),ue(r))y=d,M=p;else{if(!ce(r))return[0];y=f,M=b}I(y,M)&&(y=O(y),M=Math.max(1,O(M))),"Ditto"===t.name&&"Metal Powder"===t.item.name&&(M=Math.trunc(3*M/2),I(M)&&(y=O(y,1),M=Math.max(1,O(M,1)))),a.isExplosion()&&(M=Math.max(1,Math.trunc(M/2))),"Beat Up"===a.name?(y=t.beatUpStats[a.beatUpHit],M=e.baseStat(S.DEF),u=t.beatUpLevels[a.beatUpHit]):"Present"===a.name&&(y=Math.floor(10*o[0]/o[1]),M=Ie[t.secondaryType()]||0,u=Ie[e.secondaryType()]||0),M=Math.max(1,M);let g=Math.trunc(Math.trunc(Math.trunc(2*u/5+2)*n*y/M)/50);if(a.critical&&(g*=2),t.item.boostedType()===r&&(g=Math.trunc(110*g/100)),g=Math.min(997,g)+2,i.sun()?r===A.FIRE?g=Math.trunc(3*g/2):r===A.WATER&&(g=Math.trunc(g/2)):i.rain()&&(r===A.WATER?g=Math.trunc(3*g/2):r!==A.FIRE&&"Solar Beam"!==a.name||(g=Math.trunc(g/2))),t.stab(r)&&(g=Math.trunc(3*g/2)),g=Math.trunc(g*o[0]/o[1]),"Reversal"===a.name||"Flail"===a.name)return[g];let v=w(g,217,255);return"Pursuit"===a.name&&e.switchedOut&&(v=v.map(t=>2*t)),v},[d.ADV]:(t,e,a,i)=>{const s=we(t,e,a,i);if(s.fail||0===s.effectiveness[0])return[0];const r=s.moveType,n=s.movePower,o=s.effectiveness;let u,c,h,l=t.stat(S.ATK),m=t.stat(S.SATK),d=e.stat(S.DEF),p=e.stat(S.SDEF);switch("Huge Power"!==t.ability.name&&"Pure Power"!==t.ability.name||(l*=2),t.item.name){case"Choice Band":l=Math.trunc(3*l/2);break;case"Soul Dew":"Latias"!==t.name&&"Latios"!==t.name||(m=Math.trunc(3*m/2));break;case"Deep Sea Tooth":"Clamperl"===t.name&&(m*=2);break;case"Sea Incense":m=Math.trunc(105*m/100);break;default:t.item.boostedType()===r?ue(r)?l=Math.trunc(110*l/100):m=Math.trunc(110*m/100):t.thickClubBoosted()?l*=2:t.lightBallBoosted()&&(m*=2)}switch(e.item.name){case"Soul Dew":"Latias"!==e.name&&"Latios"!==e.name||(p=Math.trunc(3*p/2));break;case"Deep Sea Scale":"Clamperl"===e.name&&(p*=2);break;case"Metal Powder":"Ditto"===e.name&&(d*=2)}switch(t.ability.name){case"Hustle":l=Math.trunc(3*l/2);break;case"Plus":t.minus&&(m=Math.trunc(3*m/2));break;case"Minus":t.plus&&(m=Math.trunc(3*m/2));break;case"Guts":t.status&&(l=Math.trunc(3*l/2))}switch(e.ability.name){case"Thick Fat":r!==A.FIRE&&r!==A.ICE||(m=Math.trunc(m/2));break;case"Marvel Scale":e.status&&(d=Math.trunc(3*d/2))}if(a.isExplosion()&&(d=Math.max(1,Math.trunc(d/2))),a.critical?(l=Math.trunc(l*Math.max(2,2+t.boosts[S.ATK])/2),m=Math.trunc(m*Math.max(2,2+t.boosts[S.SATK])/2),d=Math.trunc(2*d/Math.max(2,2-e.boosts[S.DEF])),p=Math.trunc(2*p/Math.max(2,2-e.boosts[S.SDEF]))):(l=Math.trunc(l*Math.max(2,2+t.boosts[S.ATK])/Math.max(2,2-t.boosts[S.ATK])),m=Math.trunc(m*Math.max(2,2+t.boosts[S.SATK])/Math.max(2,2-t.boosts[S.SATK])),d=Math.trunc(d*Math.max(2,2+e.boosts[S.DEF])/Math.max(2,2-e.boosts[S.DEF])),p=Math.trunc(p*Math.max(2,2+e.boosts[S.SDEF])/Math.max(2,2-e.boosts[S.SDEF]))),"Beat Up"===a.name)u=t.beatUpStats[a.beatUpHit],c=e.baseStat(S.DEF),h=t.beatUpLevels[a.beatUpHit];else if(ue(r))u=l,c=d,h=t.level;else{if(!ce(r))return[0];u=m,c=p,h=t.level}let f=Math.trunc(Math.trunc(Math.trunc(2*h/5+2)*n*u/c)/50);switch("Beat Up"!==a.name&&(t.isBurned()&&"Guts"!==t.ability.name&&(f=Math.trunc(f/2)),!a.critical&&(e.reflect&&ue(r)||e.lightScreen&&ce(r))&&(f=Math.trunc(i.multiBattle?2*f/3:f/2))),i.multiBattle&&a.hasMultipleTargets()&&(f=Math.trunc(f/2)),"Weather Ball"!==a.name&&(i.sun()?r===A.FIRE?f=Math.trunc(3*f/2):r===A.WATER&&(f=Math.trunc(f/2)):i.rain()&&(r===A.WATER?f=Math.trunc(3*f/2):r===A.FIRE&&(f=Math.trunc(f/2))),i.sun()||i.isClearWeather()||"Solar Beam"!==a.name||(f=Math.trunc(f/2))),t.flashFire&&r===A.FIRE&&"Flash Fire"===t.ability.name&&(f=Math.trunc(3*f/2)),ue(r)&&(f=Math.max(1,f)),f+=2,a.critical&&(f*=2),a.name){case"Facade":t.status&&(f*=2);break;case"Pursuit":e.switchedOut&&(f*=2);break;case"Revenge":t.damagedPreviously&&(f*=2);break;case"Smelling Salts":e.isParalyzed()&&(f*=2);break;case"Weather Ball":i.isClearWeather()||(f*=2)}if(a.minimize&&a.boostedByMinimize()&&(f*=2),t.charge&&r===A.ELECTRIC&&(f*=2),t.helpingHand&&(f=Math.trunc(3*f/2)),t.stab(r)&&(f=Math.trunc(3*f/2)),f=Math.trunc(f*o[0]/o[1]),"Spit Up"===a.name)return[f];return w(f,85,100)},[d.HGSS]:(t,e,a,i)=>{const s=we(t,e,a,i);if(s.fail||0===s.effectiveness[0])return[0];const r=s.moveType,n=s.movePower,o=s.effectiveness,u=s.superEffective,c=s.notVeryEffective;let h,l,m,d;const p="Unaware"===t.ability.name,f="Unaware"===e.ability.name;switch(a.critical?(p?(l=e.stat(S.DEF),m=e.stat(S.SDEF)):(l=Math.min(e.stat(S.DEF),e.boostedStat(S.DEF)),m=Math.min(e.stat(S.SDEF),e.boostedStat(S.SDEF))),f?(h=t.stat(S.ATK),d=t.stat(S.SATK)):(h=Math.max(t.stat(S.ATK),t.boostedStat(S.ATK)),d=Math.max(t.stat(S.SATK),t.boostedStat(S.SATK)))):(p?(l=e.stat(S.DEF),m=e.stat(S.SDEF)):(l=e.boostedStat(S.DEF),m=e.boostedStat(S.SDEF)),f?(h=t.stat(S.ATK),d=t.stat(S.SATK)):(h=t.boostedStat(S.ATK),d=t.boostedStat(S.SATK))),"Huge Power"!==t.ability.name&&"Pure Power"!==t.ability.name||(h*=2),t.flowerGift&&i.sun()&&(h*=2),t.ability.name){case"Guts":t.status&&(h=Math.trunc(3*h/2));break;case"Hustle":h=Math.trunc(3*h/2);break;case"Slow Start":t.slowStart&&(h=Math.trunc(h/2));break;case"Plus":t.minus&&(d=Math.trunc(3*d/2));break;case"Minus":t.plus&&(d=Math.trunc(3*d/2));break;case"Solar Power":i.sun()&&(d*=2)}switch(t.item.name){case"Choice Band":h=Math.trunc(3*h/2);break;case"Choice Specs":d=Math.trunc(3*d/2);break;case"Soul Dew":"Latias"!==t.name&&"Latios"!==t.name||(d=Math.trunc(3*d/2));break;case"Deep Sea Tooth":"Clamperl"===t.name&&(d*=2);break;default:t.thickClubBoosted()?h*=2:t.lightBallBoosted()&&(h*=2,d*=2)}switch(a.isExplosion()&&(l=Math.trunc(l/2)),"Marvel Scale"===e.ability.name&&e.status&&(l=Math.trunc(3*l/2)),e.flowerGift&&i.sun()&&(m=Math.trunc(3*m/2)),e.item.name){case"Metal Powder":"Ditto"===e.name&&(l*=2);break;case"Soul Dew":"Latias"!==e.name&&"Latios"!==e.name||(m=Math.trunc(3*m/2));break;case"Deep Sea Scale":"Clamperl"===e.name&&(m*=2)}let b,y,M;if(i.sand()&&e.stab(A.ROCK)&&(m=Math.trunc(3*m/2)),"Beat Up"===a.name)b=t.beatUpStats[a.beatUpHit],y=e.baseStat(S.DEF),M=t.beatUpLevels[a.beatUpHit];else if(a.isPhysical())b=h,y=l,M=t.level;else{if(!a.isSpecial())return[0];b=d,y=m,M=t.level}let g=Math.trunc(Math.trunc(Math.trunc(2*M/5+2)*n*b/y)/50);if("Beat Up"!==a.name&&(t.isBurned()&&a.isPhysical()&&"Guts"!==t.ability.name&&(g=Math.trunc(g/2)),!a.critical&&(e.reflect&&a.isPhysical()||e.lightScreen&&a.isSpecial())&&(g=i.multiBattle?Math.trunc(2*g/3):Math.trunc(g/2))),i.multiBattle&&a.hasMultipleTargets()&&(g=Math.trunc(3*g/4)),"Weather Ball"!==a.name&&(i.sun()?r===A.FIRE?g=Math.trunc(3*g/2):r===A.WATER&&(g=Math.trunc(g/2)):i.rain()&&(r===A.WATER?g=Math.trunc(3*g/2):r===A.FIRE&&(g=Math.trunc(g/2))),i.sun()||i.isClearWeather()||"Solar Beam"!==a.name||(g=Math.trunc(g/2))),t.flashFire&&r===A.FIRE&&"Flash Fire"===t.ability.name&&(g=Math.trunc(3*g/2)),g+=2,a.critical&&(g*="Sniper"===t.ability.name?3:2),"Beat Up"!==a.name){if("Life Orb"===t.item.name)g=Math.trunc(13*g/10);else if("Metronome"===t.item.name){const e=Math.min(20,10+t.metronome);g=Math.trunc(g*e/10)}a.meFirst&&(g=Math.trunc(3*g/2))}let v=w(g,85,100);return t.stab(r)&&(v=v.map(t=>Math.trunc(3*t/2))),v=v.map(t=>Math.trunc(t*o[0]/o[1])),u?(e.ability.reducesSuperEffective()&&(v=v.map(t=>Math.trunc(3*t/4))),"Expert Belt"===t.item.name&&(v=v.map(t=>Math.trunc(12*t/10))),r===e.item.berryTypeResist()&&(v=v.map(t=>Math.trunc(t/2)))):c&&"Tinted Lens"===t.ability.name&&(v=v.map(t=>2*t)),e.item.berryTypeResist()===A.NORMAL&&r===A.NORMAL&&(v=v.map(t=>Math.trunc(t/2))),v},[d.B2W2]:(t,e,a,i)=>{const s=we(t,e,a,i);if(s.fail||0===s.effectiveness[0])return[0];const r=s.moveType,n=s.movePower,o=s.effectiveness,u=s.superEffective,c=s.notVeryEffective,h=i.wonderRoom?S.SDEF:S.DEF,l=i.wonderRoom?S.DEF:S.SDEF,m="Unaware"===t.ability.name,d="Unaware"===e.ability.name;let p,f,b,y;"Foul Play"===a.name?(m?(f=e.stat(h),y=e.stat(l),p=e.stat(S.ATK)):a.critical?(f=Math.min(e.stat(h),e.boostedStat(h)),y=Math.min(e.stat(l),e.boostedStat(l)),p=Math.max(e.stat(S.ATK),e.boostedStat(S.ATK))):(f=e.boostedStat(h),y=e.boostedStat(l),p=e.boostedStat(S.ATK)),b=d?t.stat(S.SATK):a.critical?Math.max(t.stat(S.SATK),t.boostedStat(S.SATK)):t.boostedStat(S.SATK)):a.ignoresDefenseBoosts()?(f=e.stat(h),y=e.stat(l),d?(p=t.stat(S.ATK),b=t.stat(S.SATK)):a.critical?(p=Math.max(t.stat(S.ATK),t.boostedStat(S.ATK)),b=Math.max(t.stat(S.SATK),t.boostedStat(S.SATK))):(p=t.boostedStat(S.ATK),b=t.boostedStat(S.SATK))):(m?(f=e.stat(h),y=e.stat(l)):a.critical?(f=Math.min(e.stat(h),e.boostedStat(h)),y=Math.min(e.stat(l),e.boostedStat(l))):(f=e.boostedStat(h),y=e.boostedStat(l)),d?(p=t.stat(S.ATK),b=t.stat(S.SATK)):a.critical?(p=Math.max(t.stat(S.ATK),t.boostedStat(S.ATK)),b=Math.max(t.stat(S.SATK),t.boostedStat(S.SATK))):(p=t.boostedStat(S.ATK),b=t.boostedStat(S.SATK)));let M=4096,g=4096;switch("Thick Fat"!==e.ability.name||r!==A.FIRE&&r!==A.ICE||(M=D(2048,M),g=D(2048,g)),t.ability.name){case"Guts":e.status&&(M=D(6144,M));break;case"Plus":t.minus&&(g=D(6144,g));break;case"Minus":t.plus&&(g=D(6144,g));break;case"Defeatist":2*t.currentHp<=t.stat(S.HP)&&(M=D(2048,M),g=D(2048,g));break;case"Huge Power":case"Pure Power":M=D(8192,M);break;case"Solar Power":i.sun()&&(g=D(6144,g));break;case"Hustle":p=B(6144,p);break;case"Flash Fire":t.flashFire&&r===A.FIRE&&(M=D(6144,M),g=D(6144,g));break;case"Slow Start":t.slowStart&&(M=D(2048,M));break;default:t.pinchAbilityActivated(r)&&(M=D(6144,M),g=D(6144,g))}switch(t.flowerGift&&i.sun()&&(M=D(6144,M)),t.item.name){case"Deep Sea Tooth":"Clamperl"===t.name&&(g=D(8192,g));break;case"Soul Dew":"Latias"!==t.name&&"Latios"!==t.name||(g=D(6144,g));break;case"Choice Band":M=D(6144,M);break;case"Choice Specs":g=D(6144,g);break;default:t.thickClubBoosted()?M=D(8192,M):t.lightBallBoosted()&&(M=D(8192,M),g=D(8192,g))}p=B(M,p),b=B(g,b),i.sand()&&e.stab(A.ROCK)&&(y=B(6144,y));let v,E,R=4096,T=4096;switch("Marvel Scale"===e.ability.name&&e.status&&(R=D(6144,R)),e.flowerGift&&i.sun()&&(T=D(6144,T)),e.item.name){case"Deep Sea Scale":"Clamperl"===e.name&&(T=D(6144,T));break;case"Metal Powder":"Ditto"===e.name&&(R=D(8192,R));break;case"Eviolite":e.hasEvolution()&&(R=D(6144,R),T=D(6144,T));break;case"Soul Dew":"Latias"!==e.name&&"Latios"!==e.name||(T=D(6144,T))}if(f=B(R,f),y=B(T,y),a.isPsyshockLike())v=b,E=f;else if(a.isPhysical())v=p,E=f;else{if(!a.isSpecial())return[0];v=b,E=y}let k=Math.trunc(Math.trunc(Math.trunc(2*t.level/5+2)*n*v/E)/50);k+=2,i.multiBattle&&a.hasMultipleTargets()&&(k=B(3072,k)),"Weather Ball"!==a.name&&(i.sun()?r===A.FIRE?k=B(6144,k):r===A.WATER&&(k=B(2048,k)):i.rain()&&(r===A.WATER?k=B(6144,k):r===A.FIRE&&(k=B(2048,k)))),a.critical&&(k=B(8192,k));let P=w(k,85,100);t.stab(r)&&(P="Adaptability"===t.ability.name?H(8192,P):H(6144,P)),P=P.map(t=>Math.trunc(t*o[0]/o[1])),t.isBurned()&&a.isPhysical()&&"Guts"!==t.ability.name&&(P=P.map(t=>Math.trunc(t/2))),P=P.map(t=>Math.max(1,t));let I=4096;switch(a.critical||"Infiltrator"===t.ability.name||(e.reflect&&(a.isPhysical()||a.isPsyshockLike())&&(I=D(i.multiBattle?2703:2048,I)),e.lightScreen&&a.isSpecial()&&!a.isPsyshockLike()&&(I=D(i.multiBattle?2703:2048,I))),e.multiscaleIsActive()&&(I=D(2048,I)),c&&"Tinted Lens"===t.ability.name&&(I=D(8192,I)),e.friendGuard&&(I=D(3072,I)),"Sniper"===t.ability.name&&a.critical&&(I=D(6144,I)),u&&e.ability.reducesSuperEffective()&&(I=D(3072,I)),t.item.name){case"Metronome":if(t.metronome<=4){const e=4096+819*t.metronome;I=D(e,I)}else I=D(8192,I);break;case"Expert Belt":u&&(I=D(4915,I));break;case"Life Orb":I=D(5324,I)}return r!==e.item.berryTypeResist()||!u&&r!==A.NORMAL||(I=D(2048,I),e.item.used=!0),(a.dig&&a.boostedByDig()||a.dive&&a.boostedByDive()||a.minimize&&a.boostedByMinimize())&&(I=D(8192,I)),P=H(I,P)},[d.ORAS]:(t,e,a,i)=>{const s=we(t,e,a,i);if(s.fail||0===s.effectiveness[0])return[0];const r=s.moveType,n=s.movePower,o=s.effectiveness,u=s.superEffective,c=s.notVeryEffective,h=i.wonderRoom?S.SDEF:S.DEF,l=i.wonderRoom?S.DEF:S.SDEF,m="Unaware"===t.ability.name,d="Unaware"===e.ability.name;let p,f,b,y;"Foul Play"===a.name?(m?(f=e.stat(h),y=e.stat(l),p=e.stat(S.ATK)):a.critical?(f=Math.min(e.stat(h),e.boostedStat(h)),y=Math.min(e.stat(l),e.boostedStat(l)),p=Math.max(e.stat(S.ATK),e.boostedStat(S.ATK))):(f=e.boostedStat(h),y=e.boostedStat(l),p=e.boostedStat(S.ATK)),b=d?t.stat(S.SATK):a.critical?Math.max(t.stat(S.SATK),t.boostedStat(S.SATK)):t.boostedStat(S.SATK)):a.ignoresDefenseBoosts()?(f=e.stat(h),y=e.stat(l),d?(p=t.stat(S.ATK),b=t.stat(S.SATK)):a.critical?(p=Math.max(t.stat(S.ATK),t.boostedStat(S.ATK)),b=Math.max(t.stat(S.SATK),t.boostedStat(S.SATK))):(p=t.boostedStat(S.ATK),b=t.boostedStat(S.SATK))):(m?(f=e.stat(h),y=e.stat(l)):a.critical?(f=Math.min(e.stat(h),e.boostedStat(h)),y=Math.min(e.stat(l),e.boostedStat(l))):(f=e.boostedStat(h),y=e.boostedStat(l)),d?(p=t.stat(S.ATK),b=t.stat(S.SATK)):a.critical?(p=Math.max(t.stat(S.ATK),t.boostedStat(S.ATK)),b=Math.max(t.stat(S.SATK),t.boostedStat(S.SATK))):(p=t.boostedStat(S.ATK),b=t.boostedStat(S.SATK)));let M=4096,g=4096;switch("Thick Fat"!==e.ability.name||r!==A.FIRE&&r!==A.ICE||(M=D(2048,M),g=D(2048,g)),t.ability.name){case"Guts":e.status&&(M=D(6144,M));break;case"Plus":t.minus&&(g=D(6144,g));break;case"Minus":t.plus&&(g=D(6144,g));break;case"Defeatist":2*t.currentHp<=t.stat(S.HP)&&(M=D(2048,M),g=D(2048,g));break;case"Huge Power":case"Pure Power":M=D(8192,M);break;case"Solar Power":i.sun()&&(g=D(6144,g));break;case"Hustle":p=B(6144,p);break;case"Flash Fire":t.flashFire&&r===A.FIRE&&(M=D(6144,M),g=D(6144,g));break;case"Slow Start":t.slowStart&&(M=D(2048,M));break;default:t.pinchAbilityActivated(r)&&(M=D(6144,M),g=D(6144,g))}switch(t.flowerGift&&i.sun()&&(M=D(6144,M)),t.item.name){case"Deep Sea Tooth":"Clamperl"===t.name&&(g=D(8192,g));break;case"Soul Dew":"Latias"!==t.name&&"Latios"!==t.name||(g=D(6144,g));break;case"Choice Band":M=D(6144,M);break;case"Choice Specs":g=D(6144,g);break;default:t.thickClubBoosted()?M=D(8192,M):t.lightBallBoosted()&&(M=D(8192,M),g=D(8192,g))}p=B(M,p),b=B(g,b),i.sand()&&e.stab(A.ROCK)&&(y=B(6144,y));let v,E,R=4096,T=4096;switch("Marvel Scale"===e.ability.name&&e.status?R=D(6144,R):"Grass Pelt"===e.ability.name&&i.grassyTerrain()&&(R=D(6144,R)),e.flowerGift&&i.sun()&&(T=D(6144,T)),e.item.name){case"Deep Sea Scale":"Clamperl"===e.name&&(T=D(6144,T));break;case"Metal Powder":"Ditto"===e.name&&(R=D(8192,R));break;case"Eviolite":e.hasEvolution()&&(R=D(6144,R),T=D(6144,T));break;case"Soul Dew":"Latias"!==e.name&&"Latios"!==e.name||(T=D(6144,T));break;case"Assault Vest":T=D(6144,T)}if(f=B(R,f),y=B(T,y),a.isPsyshockLike())v=b,E=f;else if(a.isPhysical())v=p,E=f;else{if(!a.isSpecial())return[0];v=b,E=y}let k=Math.trunc(Math.trunc(Math.trunc(2*t.level/5+2)*n*v/E)/50);if(k+=2,i.multiBattle&&a.hasMultipleTargets()&&(k=B(3072,k)),"Weather Ball"!==a.name){if(i.harshSun()&&r===A.WATER||i.heavyRain()&&r===A.FIRE)return[0];i.sun()?r===A.FIRE?k=B(6144,k):r===A.WATER&&(k=B(2048,k)):i.rain()&&(r===A.WATER?k=B(6144,k):r===A.FIRE&&(k=B(2048,k)))}(i.grassyTerrain()&&r===A.GRASS||i.electricTerrain()&&r===A.ELECTRIC||i.psychicTerrain()&&r===A.PSYCHIC)&&t.isGrounded(i)&&(k=B(6144,k)),i.mistyTerrain()&&e.isGrounded(i)&&r===A.DRAGON&&(k=B(2048,k)),a.critical&&(k=B(6144,k));let P=w(k,85,100);(t.stab(r)||"Protean"===t.ability.name)&&(P="Adaptability"===t.ability.name?H(8192,P):H(6144,P)),P=P.map(t=>Math.trunc(t*o[0]/o[1])),t.isBurned()&&a.isPhysical()&&"Guts"!==t.ability.name&&"Facade"!==a.name&&(P=P.map(t=>Math.trunc(t/2))),P=P.map(t=>Math.max(1,t));let I=4096;switch(a.critical||"Infiltrator"===t.ability.name||(e.reflect&&(a.isPhysical()||a.isPsyshockLike())&&(I=D(i.multiBattle?2703:2048,I)),e.lightScreen&&a.isSpecial()&&!a.isPsyshockLike()&&(I=D(i.multiBattle?2703:2048,I))),e.multiscaleIsActive()&&(I=D(2048,I)),"Fur Coat"===e.ability.name&&(a.isPhysical()||a.isPsyshockLike())&&(I=D(2048,I)),c&&"Tinted Lens"===t.ability.name&&(I=D(8192,I)),e.friendGuard&&(I=D(3072,I)),"Sniper"===t.ability.name&&a.critical&&(I=D(6144,I)),u&&e.ability.reducesSuperEffective()&&(I=D(3072,I)),i.grassyTerrain()&&a.weakenedByGrassyTerrain()&&(I=D(2048,I)),t.item.name){case"Metronome":if(t.metronome<=4){const e=4096+819*t.metronome;I=D(e,I)}else I=D(8192,I);break;case"Expert Belt":u&&(I=D(4915,I));break;case"Life Orb":I=D(5324,I)}return r!==e.item.berryTypeResist()||!u&&r!==A.NORMAL||(I=D(2048,I),e.item.used=!0),(a.dig&&a.boostedByDig()||a.dive&&a.boostedByDive()||a.minimize&&a.boostedByMinimize())&&(I=D(8192,I)),P=H(I,P)},[d.SM]:(t,e,a,i)=>{const s=we(t,e,a,i);if(s.fail||0===s.effectiveness[0])return[0];const r=s.moveType,n=s.movePower,o=s.effectiveness,u=s.superEffective,c=s.notVeryEffective,h=i.wonderRoom?S.SDEF:S.DEF,l=i.wonderRoom?S.DEF:S.SDEF,m="Unaware"===t.ability.name,d="Unaware"===e.ability.name;let p,f,b,y;"Foul Play"===a.name?(m?(f=e.stat(h),y=e.stat(l),p=e.stat(S.ATK)):a.critical?(f=Math.min(e.stat(h),e.boostedStat(h)),y=Math.min(e.stat(l),e.boostedStat(l)),p=Math.max(e.stat(S.ATK),e.boostedStat(S.ATK))):(f=e.boostedStat(h),y=e.boostedStat(l),p=e.boostedStat(S.ATK)),b=d?t.stat(S.SATK):a.critical?Math.max(t.stat(S.SATK),t.boostedStat(S.SATK)):t.boostedStat(S.SATK)):a.ignoresDefenseBoosts()?(f=e.stat(h),y=e.stat(l),d?(p=t.stat(S.ATK),b=t.stat(S.SATK)):a.critical?(p=Math.max(t.stat(S.ATK),t.boostedStat(S.ATK)),b=Math.max(t.stat(S.SATK),t.boostedStat(S.SATK))):(p=t.boostedStat(S.ATK),b=t.boostedStat(S.SATK))):(m?(f=e.stat(h),y=e.stat(l)):a.critical?(f=Math.min(e.stat(h),e.boostedStat(h)),y=Math.min(e.stat(l),e.boostedStat(l))):(f=e.boostedStat(h),y=e.boostedStat(l)),d?(p=t.stat(S.ATK),b=t.stat(S.SATK)):a.critical?(p=Math.max(t.stat(S.ATK),t.boostedStat(S.ATK)),b=Math.max(t.stat(S.SATK),t.boostedStat(S.SATK))):(p=t.boostedStat(S.ATK),b=t.boostedStat(S.SATK)));let M=4096,g=4096;switch("Thick Fat"!==e.ability.name||r!==A.FIRE&&r!==A.ICE||(M=D(2048,M),g=D(2048,g)),t.ability.name){case"Guts":e.status&&(M=D(6144,M));break;case"Plus":t.minus&&(g=D(6144,g));break;case"Minus":t.plus&&(g=D(6144,g));break;case"Defeatist":2*t.currentHp<=t.stat(S.HP)&&(M=D(2048,M),g=D(2048,g));break;case"Huge Power":case"Pure Power":M=D(8192,M);break;case"Solar Power":i.sun()&&(g=D(6144,g));break;case"Hustle":p=B(6144,p);break;case"Flash Fire":t.flashFire&&r===A.FIRE&&(M=D(6144,M),g=D(6144,g));break;case"Slow Start":t.slowStart&&(M=D(2048,M));break;default:t.pinchAbilityActivated(r)&&(M=D(6144,M),g=D(6144,g))}switch(t.flowerGift&&i.sun()&&(M=D(6144,M)),t.battery&&(g=D(5325,g)),t.item.name){case"Deep Sea Tooth":"Clamperl"===t.name&&(g=D(8192,g));break;case"Choice Band":M=D(6144,M);break;case"Choice Specs":g=D(6144,g);break;default:t.thickClubBoosted()?M=D(8192,M):t.lightBallBoosted()&&(M=D(8192,M),g=D(8192,g))}p=B(M,p),b=B(g,b),i.sand()&&e.stab(A.ROCK)&&(y=B(6144,y));let v,E,R=4096,T=4096;switch("Marvel Scale"===e.ability.name&&e.status?R=D(6144,R):"Grass Pelt"===e.ability.name&&i.grassyTerrain()&&(R=D(6144,R)),e.flowerGift&&i.sun()&&(T=D(6144,T)),e.item.name){case"Deep Sea Scale":"Clamperl"===e.name&&(T=D(6144,T));break;case"Metal Powder":"Ditto"===e.name&&(R=D(8192,R));break;case"Eviolite":e.hasEvolution()&&(R=D(6144,R),T=D(6144,T));break;case"Assault Vest":T=D(6144,T)}if(f=B(R,f),y=B(T,y),a.usesMaxAttackingStat())v=Math.max(p,b),E=y;else if(a.isPsyshockLike())v=b,E=f;else if(a.isPhysical())v=p,E=f;else{if(!a.isSpecial())return[0];v=b,E=y}let k=Math.trunc(Math.trunc(Math.trunc(2*t.level/5+2)*n*v/E)/50);if(k+=2,i.multiBattle&&a.hasMultipleTargets()&&(k=B(3072,k)),"Weather Ball"!==a.name){if(i.harshSun()&&r===A.WATER||i.heavyRain()&&r===A.FIRE)return[0];i.sun()?r===A.FIRE?k=B(6144,k):r===A.WATER&&(k=B(2048,k)):i.rain()&&(r===A.WATER?k=B(6144,k):r===A.FIRE&&(k=B(2048,k)))}(i.grassyTerrain()&&r===A.GRASS||i.electricTerrain()&&r===A.ELECTRIC||i.psychicTerrain()&&r===A.PSYCHIC)&&t.isGrounded(i)&&(k=B(6144,k)),i.mistyTerrain()&&e.isGrounded(i)&&r===A.DRAGON&&(k=B(2048,k)),a.critical&&(k=B(6144,k));let P=w(k,85,100);(t.stab(r)||"Protean"===t.ability.name)&&(P="Adaptability"===t.ability.name?H(8192,P):H(6144,P)),P=P.map(t=>Math.trunc(t*o[0]/o[1])),t.isBurned()&&a.isPhysical()&&"Guts"!==t.ability.name&&"Facade"!==a.name&&(P=P.map(t=>Math.trunc(t/2))),P=P.map(t=>Math.max(1,t));let I=4096;switch(a.critical||"Infiltrator"===t.ability.name||(e.reflect&&(a.isPhysical()||a.isPsyshockLike())&&(I=D(i.multiBattle?2703:2048,I)),e.lightScreen&&a.isSpecial()&&!a.isPsyshockLike()&&(I=D(i.multiBattle?2703:2048,I))),e.multiscaleIsActive()&&(I=D(2048,I)),"Fur Coat"===e.ability.name&&(a.isPhysical()||a.isPsyshockLike())&&(I=D(2048,I)),c&&"Tinted Lens"===t.ability.name&&(I=D(8192,I)),e.friendGuard&&(I=D(3072,I)),e.auroraVeil&&(I=D(i.multiBattle?2730:2048,I)),"Sniper"===t.ability.name&&a.critical&&(I=D(6144,I)),u&&e.ability.reducesSuperEffective()&&(I=D(3072,I)),i.grassyTerrain()&&a.weakenedByGrassyTerrain()&&(I=D(2048,I)),t.item.name){case"Metronome":if(t.metronome<=4){const e=4096+819*t.metronome;I=D(e,I)}else I=D(8192,I);break;case"Expert Belt":u&&(I=D(4915,I));break;case"Life Orb":I=D(5324,I)}return e.item.berryTypeResist()!==r||!u&&r!==A.NORMAL||(I=D(2048,I),e.item.used=!0),(a.dig&&a.boostedByDig()||a.dive&&a.boostedByDive()||a.minimize&&a.boostedByMinimize())&&(I=D(8192,I)),P=H(I,P)}},Ne=ye()(t=>new ve(t),(t,e,a,i)=>{const s=i.gen,r=e.stat(S.HP),n=t.level;switch(a.name){case"Seismic Toss":case"Night Shade":return[t.level];case"Dragon Rage":return[40];case"Sonic Boom":return[20];case"Psywave":{const t=[];if(s<=d.GSC)for(let e=1;e<Math.trunc(3*n/2);e++)t.push(e);else{const e=s<=d.HGSS?10:1;for(let a=50;a<=150;a+=e)t.push(Math.max(1,Math.trunc(n*a/100)))}return t}case"Super Fang":case"Nature's Madness":return[Math.max(1,Math.trunc(e.currentHp/2))];case"Guardian of Alola":return[Math.max(1,Math.trunc(3*e.currentHp/4))];case"Endeavor":return[Math.max(0,e.currentHp-t.currentHp)];case"Final Gambit":return[t.currentHp];default:if(a.isOther()||a.isSound()&&"Soundproof"===e.ability.name||a.isBall()&&"Bulletproof"===e.ability.name||a.isExplosion()&&"Damp"===e.ability.name)return[0];if(a.isOhko())return[r]}let o=Ce[i.gen](t,e,a,i);return"Sturdy"===e.ability.name&&e.currentHp===r&&(o=o.map(t=>Math.min(r-1,t))),o});function Le(t,e,a,i){let s;if("Triple Kick"===a.name){s=new ve([0]);for(let r=1;r<=3;r++)a.tripleKickCount=r,s=s.permute(Ne(t,e,a,i),Oe),e.brokenMultiscale=!0;a.tripleKickCount=1}else if("Beat Up"===a.name){s=new ve([0]);for(let r=0;r<t.beatUpStats.length;r++)a.beatUpHit=r,s=s.permute(Ne(t,e,a,i),Oe),e.brokenMultiscale=!0;a.beatUpHit=0}else if("Present"===a.name){const r=new ve([-Math.max(1,Math.floor(e.stat(S.HP)/4))]);if(-1===a.present){const n=[r];for(let s=1;s<=3;s++)a.present=s,n.push(Ne(t,e,a,i));a.present=-1,s=ve.weightedUnion(n,i.gen>=d.ADV?[2,4,3,1]:[52,102,76,26])}else s=0===a.present?r:Ne(t,e,a,i)}else if("Parental Bond"!==t.ability.name||1!==a.maxHits()||!a.affectedByParentalBond()||i.multiBattle&&a.hasMultipleTargets())if(a.maxHits()>1){const r=[new ve([0])];for(let s=1;s<=a.maxHits();s++)i.gen>=d.GSC?r.push(r[s-1].permute(Ne(t,e,a,i),Oe)):r.push(Ne(t,e,a,i).map(t=>t*s)),e.brokenMultiscale=!0;if(a.numberOfHits>=1)s=r[a.numberOfHits];else if(2===a.maxHits())s=r[2];else{const t=i.gen>=d.B2W2?[0,0,2,2,1,1]:[0,0,3,3,1,1];s=ve.weightedUnion(r.slice(a.minHits(),a.maxHits()),t.slice(a.minHits(),a.maxHits()))}}else s=Ne(t,e,a,i),e.brokenMultiscale=!0;else s=Ne(t,e,a,i),a.secondHit=!0,e.brokenMultiscale=!0,s=s.permute(Ne(t,e,a,i),Oe),a.secondHit=!1;return"Knock Off"===a.name&&e.knockOff()&&(e.item.used=!0),s.size.leq(39)?s:s.simplify()}var Fe=(t,e,a,i)=>{switch(a.name){case"(No Move)":return[[new ve([0])],[NaN]];case"Fury Cutter":{const s=[],r=[],n=a.furyCutter;for(;a.furyCutter<5;)s.push(Le(t,e,a,i)),r.push(1),a.furyCutter++;return s.push(Le(t,e,a,i)),r.push(0),a.furyCutter=n,e.brokenMultiscale=!1,[s,r]}case"Echoed Voice":{const s=[],r=[],n=a.echoedVoice;for(;a.echoedVoice<4;)s.push(Le(t,e,a,i)),r.push(1),a.echoedVoice++;return s.push(Le(t,e,a,i)),r.push(0),a.echoedVoice=n,e.brokenMultiscale=!1,[s,r]}case"Trump Card":{const s=[],r=[],n=a.trumpPP;for(s.push(Le(t,e,a,i));a.trumpPP>0;)r.push(1),"Pressure"===e.ability.name?a.trumpPP-=Math.min(2,a.trumpPP):a.trumpPP--,s.push(Le(t,e,a,i));return r.push(NaN),a.trumpPP=n,e.brokenMultiscale=!1,[s,r]}case"Explosion":case"Self-Destruct":{const s=[Le(t,e,a,i)],r=[NaN];return e.brokenMultiscale=!1,[s,r]}case"Rollout":case"Ice Ball":{const s=[],r=[],n=a.rollout;for(let n=0;n<4;n++)s.push(Le(t,e,a,i)),r.push(1),a.rollout++;return s.push(Le(t,e,a,i)),r.push(-4),a.rollout=n,e.brokenMultiscale=!1,[s,r]}default:{const s=[Le(t,e,a,i),Le(t,e,a,i)],r=[1,0];return e.brokenMultiscale=!1,[s,r]}}},xe=(t,e)=>{const a=[],i=[],s=t.stat(S.HP);return e.sand()&&t.hurtBySandstorm()?(a.push(-Math.max(1,Math.trunc(s/16))),i.push("Sandstorm")):e.hail()&&t.hurtByHail()&&(a.push(-Math.max(1,Math.trunc(s/16))),i.push("Hail")),"Leftovers"===t.item.name&&(a.push(Math.max(1,Math.trunc(s/16))),i.push("Leftovers")),t.isBurned()?(a.push(-Math.max(1,Math.trunc(s/8))),i.push("Burn")):t.isPoisoned()?(a.push(-Math.max(1,Math.trunc(s/8))),i.push("Poison")):t.isBadlyPoisoned()&&(a.push("toxic"),i.push("Toxic")),{values:a,messages:i}},Ge=(t,e,a)=>{const i=[],s=[],r=e.stat(S.HP);if(a.sand()&&e.hurtBySandstorm()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Sandstorm")):a.hail()&&e.hurtByHail()&&(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Hail")),"Dry Skin"===e.ability.name?a.sun()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&(i.push(Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&"Rain Dish"===e.ability.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Rain Dish")):a.hail()&&"Ice Body"===e.ability.name&&(i.push(Math.max(1,Math.trunc(r/16))),s.push("Ice Body")),"Leftovers"===e.item.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Leftovers")):"Black Sludge"===e.item.name&&(e.stab(A.POISON)?i.push(Math.max(1,Math.trunc(r/16))):i.push(-Math.max(1,Math.trunc(r/16))),s.push("Black Sludge")),"Heatproof"===e.ability.nonDisabledName()&&e.isBurned()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Burn")):e.isBurned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Burn")):e.isPoisoned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Poison")):e.isBadlyPoisoned()&&(i.push("toxic"),s.push("Toxic")),e.isAsleep()&&"Bad Dreams"===t.ability.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Bad Dreams")),"Sticky Barb"===e.item.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Sticky Barb")),"Magic Guard"===e.ability.name)for(let t=1;t<i.length;t++)i[t]<0&&(i.splice(t,1),s.splice(t,1));return{values:i,messages:s}},Ke=(t,e)=>{const a=[],i=[],s=t.stat(S.HP);return t.isBurned()?(a.push(-Math.max(1,Math.trunc(s/8))),i.push("Burn")):t.isPoisoned()?(a.push(-Math.max(1,Math.trunc(s/8))),i.push("Poison")):t.isBadlyPoisoned()&&(a.push("toxic"),i.push("Toxic")),e.sand()&&t.hurtBySandstorm()&&(a.push(-Math.max(1,Math.trunc(s/8))),i.push("Sandstorm")),"Leftovers"===t.item.name&&(a.push(Math.max(1,Math.trunc(s/16))),i.push("Leftovers")),{values:a,messages:i}},Ue=(t,e,a)=>{const i=[],s=[],r=e.stat(S.HP);if(a.sand()&&e.hurtBySandstorm()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Sandstorm")):a.hail()&&e.hurtByHail()&&(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Hail")),"Dry Skin"===e.ability.name?a.sun()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&(i.push(Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&"Rain Dish"===e.ability.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Rain Dish")):a.hail()&&"Ice Body"===e.ability.name&&(i.push(Math.max(1,Math.trunc(r/16))),s.push("Ice Body")),"Leftovers"===e.item.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Leftovers")):"Black Sludge"===e.item.name&&(e.stab(A.POISON)?i.push(Math.max(1,Math.trunc(r/16))):i.push(-Math.max(1,Math.trunc(r/16))),s.push("Black Sludge")),e.isBurned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Burn")):e.isPoisoned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Poison")):e.isBadlyPoisoned()&&(i.push("toxic"),s.push("Toxic")),e.isAsleep()&&"Bad Dreams"===t.ability.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Bad Dreams")),"Sticky Barb"===e.item.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Sticky Barb")),"Magic Guard"===e.ability.name)for(let t=1;t<i.length;t++)i[t]<0&&(i.splice(t,1),s.splice(t,1));return{values:i,messages:s}},Ye=(t,e,a)=>{const i=[],s=[],r=e.stat(S.HP);if(a.sand()&&e.hurtBySandstorm()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Sandstorm")):a.hail()&&e.hurtByHail()&&(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Hail")),"Dry Skin"===e.ability.name?a.sun()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&(i.push(Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&"Rain Dish"===e.ability.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Rain Dish")):a.hail()&&"Ice Body"===e.ability.name&&(i.push(Math.max(1,Math.trunc(r/16))),s.push("Ice Body")),"Leftovers"===e.item.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Leftovers")):"Black Sludge"===e.item.name&&(e.stab(A.POISON)?i.push(Math.max(1,Math.trunc(r/16))):i.push(-Math.max(1,Math.trunc(r/16))),s.push("Black Sludge")),"Heatproof"===e.ability.nonDisabledName()&&e.isBurned()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Burn")):e.isBurned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Burn")):e.isPoisoned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Poison")):e.isBadlyPoisoned()&&(i.push("toxic"),s.push("Toxic")),e.isAsleep()&&"Bad Dreams"===t.ability.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Bad Dreams")),"Sticky Barb"===e.item.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Sticky Barb")),"Magic Guard"===e.ability.name)for(let t=1;t<i.length;t++)i[t]<0&&(i.splice(t,1),s.splice(t,1));return{values:i,messages:s}},_e=t=>{const e=[],a=[],i=t.stat(S.HP);return t.isBurned()?(e.push(-Math.max(1,Math.trunc(i/16))),a.push("Burn")):t.isPoisoned()?(e.push(-Math.max(1,Math.trunc(i/16))),a.push("Poison")):t.isBadlyPoisoned()&&(e.push("toxic"),a.push("Toxic")),{values:e,messages:a}},We=(t,e,a)=>{const i=[],s=[],r=e.stat(S.HP);if(a.sand()&&e.hurtBySandstorm()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Sandstorm")):a.hail()&&e.hurtByHail()&&(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Hail")),"Dry Skin"===e.ability.name?a.sun()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&(i.push(Math.max(1,Math.trunc(r/8))),s.push("Dry Skin")):a.rain()&&"Rain Dish"===e.ability.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Rain Dish")):a.hail()&&"Ice Body"===e.ability.name&&(i.push(Math.max(1,Math.trunc(r/16))),s.push("Ice Body")),"Leftovers"===e.item.name?(i.push(Math.max(1,Math.trunc(r/16))),s.push("Leftovers")):"Black Sludge"===e.item.name&&(e.stab(A.POISON)?i.push(Math.max(1,Math.trunc(r/16))):i.push(-Math.max(1,Math.trunc(r/16))),s.push("Black Sludge")),a.grassyTerrain()&&e.isGrounded(a)&&(i.push(Math.max(1,Math.trunc(r/16))),s.push("Grassy Terrain")),"Heatproof"===e.ability.nonDisabledName()&&e.isBurned()?(i.push(-Math.max(1,Math.trunc(r/32))),s.push("Burn")):e.isBurned()?(i.push(-Math.max(1,Math.trunc(r/16))),s.push("Burn")):e.isPoisoned()?(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Poison")):e.isBadlyPoisoned()&&(i.push("toxic"),s.push("Toxic")),e.isAsleep()&&"Bad Dreams"===t.ability.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Bad Dreams")),"Sticky Barb"===e.item.name&&(i.push(-Math.max(1,Math.trunc(r/8))),s.push("Sticky Barb")),"Magic Guard"===e.ability.name)for(let t=1;t<i.length;t++)i[t]<0&&(i.splice(t,1),s.splice(t,1));return{values:i,messages:s}};class Ve extends RangeError{constructor(){super("Pokemon cannot be (No Pokemon)"),this.name="NoPokemonError"}}class je extends RangeError{constructor(){super("Move cannot be (No Move)"),this.name="NoMoveError"}}function ze(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}class qe{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ze(this,"gen",f),ze(this,"weather",E.CLEAR),ze(this,"terrain",k.NO_TERRAIN),ze(this,"multiBattle",!1),ze(this,"invertedBattle",!1),ze(this,"airLock",!1),ze(this,"waterSport",!1),ze(this,"mudSport",!1),ze(this,"magicRoom",!1),ze(this,"wonderRoom",!1),ze(this,"gravity",!1),ze(this,"fairyAura",!1),ze(this,"darkAura",!1),ze(this,"auraBreak",!1),ze(this,"ionDeluge",!1),Object.assign(this,t)}effectiveWeather(){return this.airLock?E.CLEAR:this.weather}isClearWeather(){return this.effectiveWeather()===E.CLEAR}rain(){const t=this.effectiveWeather();return t===E.RAIN||t===E.HEAVY_RAIN}sun(){const t=this.effectiveWeather();return t===E.SUN||t===E.HARSH_SUN}sand(){return this.effectiveWeather()===E.SAND}hail(){return this.effectiveWeather()===E.HAIL}heavyRain(){return this.effectiveWeather()===E.HEAVY_RAIN}harshSun(){return this.effectiveWeather()===E.HARSH_SUN}strongWinds(){return this.effectiveWeather()===E.STRONG_WINDS}grassyTerrain(){return this.terrain===k.GRASSY_TERRAIN}mistyTerrain(){return this.terrain===k.MISTY_TERRAIN}electricTerrain(){return this.terrain===k.ELECTRIC_TERRAIN}psychicTerrain(){return this.terrain===k.PSYCHIC_TERRAIN}}a(229),a(80);function Qe(t,e){if(null==t)return{};var a,i,s=function(t,e){if(null==t)return{};var a,i,s={},r=Object.keys(t);for(i=0;i<r.length;i++)a=r[i],e.indexOf(a)>=0||(s[a]=t[a]);return s}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)a=r[i],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(s[a]=t[a])}return s}function Ze(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}class Je{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ze(this,"gen",f),Ze(this,"id","noability"),Ze(this,"disabled",!1);const e=t.id,a=t.name,i=Qe(t,["id","name"]);Object.assign(this,i),"string"==typeof e?this.id=zt(e):"string"==typeof a&&(this.name=a)}get name(){return jt(this.effectiveId())}set name(t){this.id=zt(t)}nonDisabledName(){return jt(this.id)}pinchType(){return Xt(this.effectiveId(),this.gen)}normalToType(){return te(this.effectiveId(),this.gen)}immunityType(){return Jt(this.effectiveId(),this.gen)}ignoresAbilities(){return ee(this.effectiveId(),this.gen)}isIgnorable(){return qt(this.id,this.gen)}isSandImmunity(){return["Magic Guard","Overcoat","Sand Veil","Sand Rush","Sand Force"].includes(this.name)}isHailImmunity(){return["Magic Guard","Overcoat","Ice Body","Snow Cloak","Slush Rush"].includes(this.name)}reducesSuperEffective(){return["Filter","Solid Rock","Prism Armor"].includes(this.name)}hasCritArmor(){return $t(this.id,this.gen)}effectiveId(){return this.disabled?"noability":this.id}}function Xe(t,e){if(null==t)return{};var a,i,s=function(t,e){if(null==t)return{};var a,i,s={},r=Object.keys(t);for(i=0;i<r.length;i++)a=r[i],e.indexOf(a)>=0||(s[a]=t[a]);return s}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)a=r[i],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(s[a]=t[a])}return s}function $e(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const ta=new Set(["Figy Berry","Wiki Berry","Mago Berry","Aguav Berry","Iapapa Berry"]);class ea{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};$e(this,"gen",f),$e(this,"id","noitem"),$e(this,"used",!1),$e(this,"disabled",!1);const e=t.id,a=t.name,i=Xe(t,["id","name"]);Object.assign(this,i),"string"==typeof e?this.id=Ht(e):"string"==typeof a&&(this.name=a)}get name(){return Bt(this.effectiveId())}set name(t){this.id=Ht(t)}nonDisabledName(){return Bt(this.used?"noitem":this.id)}boostedType(){return Ct(this.effectiveId(),this.gen)}isBerry(){return Ft(this.used?"noitem":this.id,this.gen)}isPlate(){return Ot(this.used?"noitem":this.id,this.gen)}berryTypeResist(){return Nt(this.effectiveId(),this.gen)}naturalGiftPower(){return xt(this.effectiveId(),this.gen)}naturalGiftType(){return Gt(this.effectiveId(),this.gen)}flingPower(){return Kt(this.effectiveId(),this.gen)}gemType(){return Lt(this.effectiveId(),this.gen)}isHeavy(){return It(this.used?"noitem":this.id,this.gen)}mega(){return Ut(this.id,this.gen)}memoryType(){return Yt(this.id,this.gen)}berryHeal(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN;const e=this.name;switch(e){case"Sitrus Berry":return this.gen>=d.HGSS?Math.trunc(t/4):30;case"Oran Berry":case"Berry":return 10;case"Gold Berry":return 30;default:return ta.has(e)?this.gen>=d.SM?Math.trunc(t/2):Math.trunc(t/8):0}}berryHealThreshold(t){return this.gen>=d.SM&&ta.has(this.name)?Math.floor(t/4):Math.floor(t/2)}zMoveTransformsTo(){return Wt(this.id,this.gen)}zMoveTransformsFrom(){return Vt(this.id,this.gen)}effectiveId(){return this.used||this.disabled?"noitem":this.id}}function aa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=[],i=!0,s=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(i=(n=o.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){s=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(s)throw r}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ia(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(e){ra(t,e,a[e])})}return t}function sa(t,e){if(null==t)return{};var a,i,s=function(t,e){if(null==t)return{};var a,i,s={},r=Object.keys(t);for(i=0;i<r.length;i++)a=r[i],e.indexOf(a)>=0||(s[a]=t[a]);return s}(t,e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);for(i=0;i<r.length;i++)a=r[i],e.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(t,a)&&(s[a]=t[a])}return s}function ra(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const na=["HP","Atk","Def","SpA","SpD","Spe"],oa=["","(M)","(F)",""],ua=new Map([["HP",S.HP],["Atk",S.ATK],["Def",S.DEF],["SAtk",S.SATK],["SpAtk",S.SATK],["SpA",S.SATK],["SDef",S.SDEF],["SpDef",S.SDEF],["SpD",S.SDEF],["Spd",S.SPD],["Spe",S.SPD],["Spc",S.SPC]]);function ca(t,e,a){if(e.name=rt(nt(a)),e.isHiddenPower()){const a=e.type(),i=He.hiddenPowers(a,e.gen)[0];i&&a!==He.hiddenPowerType(t.ivs,e.gen)&&(t.ivs=i)}}function ha(t,e){let a=e.min,i=e.max,s=e.multipleOf,r=void 0===s?1:s,n=e.defaultValue;const o=[0,0,0,0,0,0].fill(n);for(const e of t.split("/").map(t=>t.trim())){let t=Number.parseInt(e,10);t=Number.isNaN(t)?n:Math.trunc(Re()(t,a,i)/r)*r;const s=ua.get(e.split(" ")[1]);void 0!==s&&(o[s]=t)}return o}const la=(t,e)=>("(No Move)"===t.name?1:0)-("(No Move)"===e.name?1:0),ma=t=>(1&t[S.ATK])<<3|(1&t[S.DEF])<<2|(1&t[S.SPD])<<1|1&t[S.SPC];function da(t,e,a,i){if(i>=d.ADV)return e<31?"".concat(e," ").concat(na[t]):"";if(t===S.HP)e=ma(a);else if(t===S.SDEF){if(i<d.GSC)return"";e=a[S.SPC]}return e>=15?"":i<d.GSC&&t===S.SPC?"".concat(e," Spc"):"".concat(e," ").concat(na[t])}function pa(t,e,a,i){if(i>=d.ADV)return e>0?"".concat(e," ").concat(na[t]):"";if(t===S.SDEF){if(i<d.GSC)return"";e=a[S.SPC]}return e>=252?"":i<d.GSC&&t===S.SPC?"".concat(e," Spc"):"".concat(e," ").concat(na[t])}class fa{constructor(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};ra(this,"gen",f),ra(this,"id","nopokemon"),ra(this,"nickname",""),ra(this,"evs",void 0),ra(this,"ivs",void 0),ra(this,"boosts",void 0),ra(this,"level",100),ra(this,"nature",R.HARDY),ra(this,"gender",b.NO_GENDER),ra(this,"ability",void 0),ra(this,"item",void 0),ra(this,"moves",void 0),ra(this,"overrideTypes",void 0),ra(this,"overrideStats",[]),ra(this,"addedType",A.CURSE),ra(this,"lightScreen",!1),ra(this,"reflect",!1),ra(this,"luckyChant",!1),ra(this,"stockpile",0),ra(this,"flashFire",!1),ra(this,"metronome",0),ra(this,"switchedOut",!1),ra(this,"movedFirst",!1),ra(this,"damagedPreviously",!1),ra(this,"damagedByPainSplit",!1),ra(this,"beatUpStats",void 0),ra(this,"beatUpLevels",void 0),ra(this,"plus",!1),ra(this,"minus",!1),ra(this,"electrify",!1),ra(this,"happiness",0),ra(this,"brokenMultiscale",!1),ra(this,"autotomize",!1),ra(this,"unburden",!1),ra(this,"tailwind",!1),ra(this,"slowStart",!1),ra(this,"toxicCounter",0),ra(this,"stealthRock",!1),ra(this,"spikes",0),ra(this,"flowerGift",!1),ra(this,"powerTrick",!1),ra(this,"foresight",!1),ra(this,"friendGuard",!1),ra(this,"battery",!1),ra(this,"charge",!1),ra(this,"helpingHand",!1),ra(this,"auroraVeil",!1),ra(this,"grounded",!1),ra(this,"ungrounded",!1),ra(this,"set",void 0),ra(this,"_status",M.NO_STATUS),ra(this,"_currentHp",void 0),ra(this,"_currentHpRange",void 0),ra(this,"_currentHpRangeBerry",void 0);const e=t.id,a=t.name,i=t.evs,s=t.ivs,r=t.boosts,n=t.ability,o=t.item,u=t.moves,c=t.beatUpLevels,h=t.beatUpStats,l=t.overrideStats,m=t.overrideTypes,p=t.currentHp,y=t.currentHpRange,g=t.currentHpRangeBerry,v=t._currentHp,E=t._currentHpRange,T=t._currentHpRangeBerry,k=t.status,P=t._status,D=sa(t,["id","name","evs","ivs","boosts","ability","item","moves","beatUpLevels","beatUpStats","overrideStats","overrideTypes","currentHp","currentHpRange","currentHpRangeBerry","_currentHp","_currentHpRange","_currentHpRangeBerry","status","_status"]);if(Object.assign(this,D),"string"==typeof e?this.id=z(e):"string"==typeof a&&(this.name=a),i)this.evs=i.slice(0);else{const t=this.gen>=d.ADV?0:252;this.evs=[0,0,0,0,0,0].fill(t)}if(s)this.ivs=s.slice(0);else{const t=this.gen>=d.ADV?31:15;this.ivs=[0,0,0,0,0,0].fill(t)}this.boosts=r?r.slice(0):[0,0,0,0,0,0,0,0],this.beatUpStats=h?h.slice(0):[0],this.beatUpLevels=c?c.slice(0):[1],void 0!==k&&C(t,"status")?this._status=k:void 0!==P&&(this._status=P),this.ability=new Je("string"==typeof n?{name:n,gen:this.gen}:ia({},n||{},{gen:this.gen})),this.item=new ea("string"==typeof o?{name:o,gen:this.gen}:ia({},o||{},{gen:this.gen}));const B={user:this,gen:this.gen},H=u||[{},{},{},{}];if(this.moves=H.map(t=>new He("string"==typeof t?ia({name:t},B):ia({},t||{},B))),this.overrideStats=l?l.slice(0):[],this.overrideTypes=m?m.slice(0):[-1,-1],void 0!==p&&C(t,"currentHp"))this._currentHp=p,this._currentHpRange=new ve([p]),this._currentHpRangeBerry=new ve;else if(y&&C(t,"currentHpRange")){this._currentHpRange=new ve(y),this._currentHpRangeBerry=g&&C(t,"currentHpRangeBerry")?new ve(g):new ve;const e=this._currentHpRange.union(this._currentHpRangeBerry);this._currentHp=ve.average(e,0)}else if(void 0!==v&&void 0!==E&&void 0!==T)this._currentHp=v,this._currentHpRange=new ve(E),this._currentHpRangeBerry=new ve(T);else{const t=this.stat(S.HP);this._currentHp=t,this._currentHpRange=new ve([t]),this._currentHpRangeBerry=new ve}}toImportable(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const e=[],a=[];a.push(this.name),this.gen>=d.ADV&&this.gender&&a.push(oa[this.gender]),this.gen>=d.GSC&&a.push("@",this.item.name),e.push(a.join(" ")),this.gen>=d.ADV&&e.push("Ability: ".concat(this.ability.name));const i=[];for(let t=0;t<6;t++){const e=pa(t,this.evs[t],this.evs,this.gen);e&&i.push(e)}i.length>0&&e.push("EVs: ".concat(i.join(" / ")));const s=He.hiddenPowerType(this.ivs,this.gen),r=He.hiddenPowers(s,this.gen)[0];if(!(this.gen>=d.GSC&&this.moves.some(t=>"Hidden Power"===t.name))||this.ivs.slice(1).join()!==r.slice(1).join()){const t=[];for(let e=0;e<6;e++){const a=da(e,this.ivs[e],this.ivs,this.gen);a&&t.push(a)}t.length>0&&e.push("IVs: ".concat(t.join(" / ")))}if(this.gen>=d.ADV){let a="".concat(Y(this.nature)," Nature");const i=V(this.nature);if(i[0]>-1&&t.natureInfo){const t=na[i[0]],e=na[i[1]];a+=" (+".concat(t,", -").concat(e,")")}e.push(a)}for(const t of this.moves)"Hidden Power"===t.name?e.push("- Hidden Power ".concat(se(s))):"(No Move)"!==t.name&&e.push("- ".concat(t.name));return e.join("\n")}toSet(){const t={m:this.moves.map(t=>t.id)},e=this.gen>=d.ADV?0:252,a=this.gen>=d.ADV?31:15;return 100!==this.level&&(t.l=this.level),this.gen>=d.ADV&&this.nature!==R.HARDY&&(t.n=this.nature),this.gen>=d.ADV&&"(No Ability)"!==this.ability.name&&(t.a=this.ability.id),this.gen>=d.GSC&&"(No Item)"!==this.item.name&&(t.i=this.item.id),this.evs.some(t=>t!==e)&&(t.e=this.evs.map(t=>Math.trunc(t/4))),this.ivs.some(t=>t!==a)&&(t.d=this.ivs.slice(0)),t}get name(){return j(this.id)}set name(t){this.id=z(t)}stat(t){if(this.powerTrick&&t===S.ATK?t=S.DEF:this.powerTrick&&t===S.DEF&&(t=S.ATK),this.overrideStats[t])return this.overrideStats[t];const e=this.baseStat(t),a=this.level;let i,s;if(this.gen<d.ADV&&t===S.HP?(s=ma(this.ivs),i=this.evs[t]):this.gen<d.ADV&&t===S.SDEF?(s=this.ivs[S.SPC],i=this.evs[S.SPC]):(s=this.ivs[t],i=this.evs[t]),i=Math.trunc(i/4),this.gen<d.ADV)return t===S.HP?Math.min(999,Math.trunc((2*(s+e)+i)*a/100)+a+10):Math.min(999,Math.trunc((2*(s+e)+i)*a/100)+5);if(t===S.HP)return 1===e?1:Math.trunc((s+2*e+i+100)*a/100)+10;const r=W(this.nature,t),n=Math.trunc((s+2*e+i)*a/100)+5;return Math.trunc(n*(10+r)/10)}boost(t){return this.gen<d.B2W2&&"Simple"===this.ability.name?Re()(2*this.boosts[t],-6,6):this.boosts[t]}boostedStat(t){const e=this.boost(t),a=this.stat(t);if(t===S.HP)return a;if(this.gen<d.ADV){const t=Math.trunc(Math.max(2,2+e)/Math.max(2,2-e)*100);return Re()(Math.trunc(a*t/100),1,999)}return Math.trunc(a*Math.max(2,2+e)/Math.max(2,2-e))}speed(t){let e=this.boostedStat(S.SPD);switch((t.rain()&&"Swift Swim"===this.ability.name||t.sun()&&"Chlorophyll"===this.ability.name||t.sand()&&"Sand Rush"===this.ability.name||t.hail()&&"Slush Rush"===this.ability.name||t.electricTerrain()&&"Surge Surfer"===this.ability.name)&&(e*=2),this.item.name){case"Choice Scarf":e=Math.trunc(3*e/2);break;case"Quick Powder":"Ditto"===this.name&&(e*=2);break;default:this.item.isHeavy()&&(e=Math.trunc(e/2))}return this.status&&"Quick Feet"===this.ability.name?e=Math.trunc(3*e/2):this.isParalyzed()&&(e=Math.trunc(e/4)),"Slow Start"===this.ability.name&&this.slowStart&&(e=Math.trunc(e/2)),this.unburden&&"(No Item)"===this.item.name&&"Unburden"===this.ability.name&&(e*=2),this.tailwind&&(e*=2),e}baseStat(t){return Z(this.id,this.gen)[t]}get currentHp(){return this._currentHp}set currentHp(t){this._currentHp=t,this._currentHpRange=new ve([t]),this._currentHpRangeBerry=new ve}get currentHpRange(){return this._currentHpRange}set currentHpRange(t){this._currentHpRange=new ve(t);const e=t.union(this.currentHpRangeBerry);this._currentHp=ve.average(e,0)}get currentHpRangeBerry(){return this._currentHpRangeBerry}set currentHpRangeBerry(t){this._currentHpRangeBerry=new ve(t);const e=t.union(this.currentHpRange);this._currentHp=ve.average(e,0)}type1(){return this.overrideTypes[0]>-1?this.overrideTypes[0]:$(this.id,this.gen)}type2(){return this.overrideTypes[1]>-1?this.overrideTypes[1]:tt(this.id,this.gen)}secondaryType(){return this.type2()===A.CURSE?this.type1():this.type2()}types(){return[this.type1(),this.type2(),this.addedType].filter(t=>t!==A.CURSE)}stab(t){return this.types().includes(t)}weight(){let t=J(this.id,this.gen);return this.autotomize&&(t=Math.max(1,t-1e3)),"Light Metal"===this.ability.name?t=Math.max(1,t/2):"Heavy Metal"===this.ability.name&&(t*=2),"Float Stone"===this.item.name&&(t=Math.max(1,t/2)),P(t)}hasEvolution(){return et(this.id,this.gen)}hasPreEvolution(){return at(this.id,this.gen)}isMega(){return it(this.id,this.gen)}isItemRequired(){return st(this.id,this.gen)===this.item.id}hurtBySandstorm(){return!(this.ability.isSandImmunity()||"Safety Goggles"===this.item.name||this.stab(A.GROUND)||this.stab(A.ROCK)||this.stab(A.STEEL))}hurtByHail(){return!this.ability.isHailImmunity()&&"Safety Goggles"!==this.item.name&&!this.stab(A.ICE)}multiscaleIsActive(){return!this.brokenMultiscale&&this.currentHp===this.stat(S.HP)&&("Multiscale"===this.ability.name||"Shadow Shield"===this.ability.name)}get status(){return this.gen>=d.SM&&"Comatose"===this.ability.name?M.ASLEEP:this._status}set status(t){this._status=t}isHealthy(){return this.status===M.NO_STATUS}isPoisoned(){return this.status===M.POISONED}isBadlyPoisoned(){return this.status===M.BADLY_POISONED}isBurned(){return this.status===M.BURNED}isParalyzed(){return this.status===M.PARALYZED}isAsleep(){return this.status===M.ASLEEP}isFrozen(){return this.status===M.FROZEN}isMale(){return this.gender===b.MALE}isFemale(){return this.gender===b.FEMALE}hasPlate(){return this.item.isPlate()}hasDrive(){return this.item.nonDisabledName().endsWith(" Drive")}hasMemory(){return this.item.nonDisabledName().endsWith(" Memory")}hasBlueOrb(){return"Blue Orb"===this.item.nonDisabledName()}hasRedOrb(){return"Red Orb"===this.item.nonDisabledName()}hasGriseousOrb(){return"Griseous Orb"===this.item.nonDisabledName()}knockOff(){return"(No Item)"!==this.item.nonDisabledName()&&"Sticky Hold"!==this.ability.name&&!this.itemLocked()}knockOffBoost(){return"(No Item)"!==this.item.nonDisabledName()&&!this.itemLocked()}itemLocked(){return this.gen<d.B2W2?"Multitype"===this.ability.name||this.hasGriseousOrb()&&this.name.includes("Giratina"):this.item.mega()===this.id||this.hasPlate()&&"Multitype"===this.ability.name||this.hasBlueOrb()&&this.name.includes("Kyogre")||this.hasRedOrb()&&this.name.includes("Groudon")||this.hasMemory()&&this.name.includes("Silvally")||this.hasDrive()&&this.name.includes("Genesect")||this.hasGriseousOrb()&&this.name.includes("Giratina")}thickClubBoosted(){return"Thick Club"===this.item.name&&(this.name.includes("Cubone")||this.name.includes("Marowak"))}lightBallBoosted(){return"Light Ball"===this.item.name&&this.name.includes("Pikachu")}hasCritArmor(){return this.ability.hasCritArmor()||this.luckyChant}pinchAbilityActivated(t){return this.ability.pinchType()===t&&this.stat(S.HP)>=3*this.currentHp}isGrounded(t){return this.grounded||t.gravity||"Iron Ball"===this.item.name||!this.ungrounded&&this.ability.immunityType()!==A.GROUND&&!this.types().includes(A.FLYING)&&"Air Balloon"!==this.item.name}static fromImportable(t,e){const a=new fa({gen:e});let i=0;const s=t.trim().replace("\r","").replace(/ {2,}/g," ").split("\n").map(t=>t.trim()),r=aa(s[0].split("@"),2),n=r[0],o=r[1],u=function(t){const e=/\((.*?)\)/g,a=e.exec(t);if(!a)return{name:t.replace("*",""),nickname:"",gender:b.NO_GENDER};const i=e.exec(t);if(i){const e=oa.indexOf(i[0].toUpperCase());return{name:a[1],nickname:t.slice(0,a.index).trim(),gender:e>-1?e:b.NO_GENDER}}const s=oa.indexOf(a[0].toUpperCase());if(s>-1){const e=/.*?(?=\()/.exec(t);return{name:e?e[0]:"",nickname:"",gender:s}}return{name:a[1],nickname:t.slice(0,a.index).trim(),gender:b.NO_GENDER}}(n);a.name=u.name,a.nickname=u.nickname,a.gender=u.gender,e>=d.GSC&&o&&(a.item.name=o);for(const t of s.slice(1)){const s=t.indexOf(":");if(s<0)t.startsWith("-")||t.startsWith("~")?(ca(a,a.moves[i],t.slice(1)),i++):"nature"===t.split(" ")[1].toLowerCase()&&(a.nature=_(t.split(" ")[0]));else{const i=t.slice(0,s).trim().toLowerCase(),r=t.slice(s+1).trim();switch(i){case"level":a.level=Re()(Number.parseInt(r,10),1,100)||100;break;case"ability":case"trait":a.ability.name=r;break;case"evs":a.evs=ha(r,{min:0,max:252,multipleOf:4,defaultValue:e>=d.ADV?0:252});break;case"ivs":a.ivs=ha(r,{min:0,max:e>=d.ADV?31:15,defaultValue:e>=d.ADV?31:15})}}}return a.moves.sort(la),a.happiness=Math.max(...a.moves.map(t=>t.optimalHappiness())),a}static fromSet(t){let e=t.set,a=t.gen,i=t.id;const s={gen:a,id:i};e.l&&(s.level=e.l),e.n&&(s.nature=e.n),e.a&&(s.ability={id:e.a,gen:a}),e.i&&(s.item={id:e.i,gen:a}),e.m&&(s.moves=e.m.map(t=>({id:t,gen:a}))),e.e&&(s.evs=e.e.map(t=>4*t)),e.d&&(s.ivs=e.d);const r=new fa(s);return r.happiness=Math.max(...r.moves.map(t=>t.optimalHappiness())),r}static calcHealthDv(t){return ma(t)}}function Sa(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var a=[],i=!0,s=!1,r=void 0;try{for(var n,o=t[Symbol.iterator]();!(i=(n=o.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){s=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(s)throw r}}return a}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ba(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{},i=Object.keys(a);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(a).filter(function(t){return Object.getOwnPropertyDescriptor(a,t).enumerable}))),i.forEach(function(e){ya(t,e,a[e])})}return t}function ya(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}const Ma={[E.CLEAR]:"",[E.HAIL]:"in Hail",[E.RAIN]:"in Rain",[E.SAND]:"in Sand",[E.SUN]:"in Sun",[E.HEAVY_RAIN]:"in Heavy Rain",[E.HARSH_SUN]:"in Harsh Sun",[E.STRONG_WINDS]:"in Strong Winds"},ga={[M.NO_STATUS]:"",[M.POISONED]:"poisoned",[M.BADLY_POISONED]:"badly poisoned",[M.BURNED]:"burned",[M.PARALYZED]:"paralyzed",[M.ASLEEP]:"asleep",[M.FROZEN]:"frozen"};function Aa(t,e,a,i){const s=new qe(i),r=s.gen,n=new fa(ba({},t,{gen:r})),o=new fa(ba({},e,{gen:r})),u=new He(ba({},a,{user:n,target:o,gen:r})),c=[],h=[],l=[];if("(No Pokemon)"===n.name||"(No Pokemon)"===o.name)throw new Ve;if("(No Move)"===u.name)throw new je;(s.magicRoom||"Klutz"===n.ability.name||"Unnerve"===o.ability.name&&n.item.isBerry())&&(n.item.disabled=!0),(s.magicRoom||"Klutz"===o.ability.name||"Unnerve"===n.ability.name&&o.item.isBerry())&&(o.item.disabled=!0),"Air Lock"!==n.ability.name&&"Air Lock"!==o.ability.name||(s.airLock=!0),"Fairy Aura"!==n.ability.name&&"Fairy Aura"!==o.ability.name||(s.fairyAura=!0),"Dark Aura"!==n.ability.name&&"Dark Aura"!==o.ability.name||(s.darkAura=!0),"Aura Break"!==n.ability.name&&"Aura Break"!==o.ability.name||(s.auraBreak=!0);const m=function(t,e,a){switch(a.gen){case d.RBY:return _e(e);case d.GSC:return Ke(e,a);case d.ADV:return xe(e,a);case d.HGSS:return Ue(t,e,a);case d.B2W2:return Ge(t,e,a);case d.ORAS:return Ye(t,e,a);case d.SM:return We(t,e,a);default:throw new RangeError("".concat(a.gen," is not a valid generation"))}}(n,o,s);m.messages.unshift(""),m.values.unshift(0),(n.ability.ignoresAbilities()||u.ignoresAbilities())&&o.ability.isIgnorable()&&(o.ability.disabled=!1),o.hasCritArmor()||!u.canCrit()?u.critical=!1:"Merciless"===n.ability.name&&(o.isPoisoned()||o.isBadlyPoisoned())&&(u.critical=!0);const p=Sa(Fe(n,o,u,s),2),f=p[0],b=p[1];"Smack Down"!==u.name&&"Thousand Arrows"!==u.name||(o.grounded=!0),n.item.disabled=!1,n.item.used=!1,o.item.disabled=!1,o.item.used=!1,o.ability.disabled=!1;const y=o.stat(S.HP),M=Math.round(f[0].min(NaN)/y*1e3)/10,g=Math.round(f[0].max(NaN)/y*1e3)/10,v=t=>Math.max(0,y-t);let E=o.currentHpRange.map(v),R=o.currentHpRangeBerry.map(v),T=A.CURSE,k=0;"Hidden Power"===u.name?(T=He.hiddenPowerType(n.ivs,r),k=He.hiddenPowerBp(n.ivs,r)):"Weather Ball"===u.name?(T=He.weatherBall(s.effectiveWeather()),k=r>=d.HGSS&&T?100:50):u.zMove?(T=u.type(),k=u.power()):T=u.type();let P=r>=d.GSC?S.SATK:S.SPC,D=r>=d.GSC?S.SDEF:S.SPC;if(u.isPsyshockLike()?(P=S.SATK,D=S.DEF):(r>=d.HGSS&&u.isPhysical()||r<d.HGSS&&ue(T))&&(P=S.ATK,D=S.DEF),n.boosts[P]&&c.push(n.boosts[P]>0?"+".concat(n.boosts[P]):"".concat(n.boosts[P])),r>=d.ADV||n.evs[P]<252){const t=r>=d.ADV?W(n.nature,P):0;t>0?c.push("".concat(n.evs[P],"+")):t<0?c.push("".concat(n.evs[P],"-")):c.push("".concat(n.evs[P])),c.push(P===S.ATK?"Atk":"SpA")}if(r>=d.GSC&&!n.isItemRequired()&&c.push(n.item.name),r>=d.ADV&&"(No Ability)"!==n.ability.name&&c.push(n.ability.name),c.push(n.name),n.isHealthy()||c.push("(".concat(ga[n.status],")")),u.critical&&c.push("critical hit"),n.helpingHand&&c.push("Helping Hand"),c.push(u.name),u.zMove||"Hidden Power"===u.name&&r<=d.B2W2)c.push("[".concat(k," BP]"));else if(u.hitsMultipleTimes()&&u.numberOfHits>=1){const t=u.numberOfHits;c.push("[".concat(t,t>1?" hits]":" hit]"))}if(c.push("vs."),o.boosts[D]&&c.push(o.boosts[D]>0?"+".concat(o.boosts[D]):"".concat(o.boosts[D])),r>=d.ADV||o.evs[D]<252||o.evs[S.HP]<252){c.push("".concat(o.evs[S.HP]," HP /"));const t=r>=d.ADV?W(o.nature,D):0;t>0?c.push("".concat(o.evs[D],"+")):t<0?c.push("".concat(o.evs[D],"-")):c.push("".concat(o.evs[D])),c.push(D===S.DEF?"Def":"SpD")}r>=d.GSC&&!o.isItemRequired()&&c.push(o.item.name),r>=d.ADV&&"(No Ability)"!==o.ability.name&&c.push(o.ability.name),c.push(o.name),o.isHealthy()||c.push("(".concat(ga[o.status],")"));const B=Math.floor(100*o.currentHp/o.stat(S.HP));if(B<100&&c.push("at ".concat(B,"%")),o.reflect&&D===S.DEF?c.push("behind Reflect"):!o.lightScreen||D!==S.SDEF&&D!==S.SPC||c.push("behind Light Screen"),Ma[s.weather]&&c.push(Ma[s.weather]),f[0].min(NaN)===f[0].max(NaN)?h.push(String(f[0].min(NaN)),"(".concat(M,"%)")):h.push("".concat(f[0].min(NaN)," - ").concat(f[0].max(NaN)),"(".concat(M," - ").concat(g,"%)")),"Magic Guard"!==o.ability.name){let t=0;if(o.stealthRock){const e=Sa(Se(A.ROCK,o.types(),{gen:r}),2),a=e[0],i=e[1];t+=Math.trunc(y*a/(8*i))}o.spikes>0&&o.isGrounded(s)&&(t+=Math.trunc(y/(10-2*o.spikes))),E=E.map(e=>Math.min(y,e+t)),R=R.map(e=>Math.min(y,e+t))}const H=function(t,e,a,i){const s=[],r=t.stat(S.HP),n=t.item.berryHeal(r),o=t.item.berryHealThreshold(r),u=i.maxTurns,c=void 0===u?9:u,h=i.rechargeTurns,l=void 0===h?0:h,m=i.effects,d=void 0===m?[0]:m;let p=new ve(i.initDmgRange||[0]),f=new ve(i.initDmgRangeBerry||[]),b=i.toxicCounter||0,y=new ve,M=new ve;const g=t=>t>=r,A=t=>r-t,v=(t,e)=>t>=r?t:t+e;for(let t=0,i=0;t<c;t++){p=p.permute(e[i],v),f=f.permute(e[i],v);for(let t=0;t<=l;t++)f=f.map(va.bind({effects:d,toxicCounter:b,totalHp:r})),p=p.map(va.bind({effects:d,toxicCounter:b,totalHp:r,berry:{heal:n,threshold:o,dmg:f}})),b++;if(s.push([p.count(g).add(f.count(g)),p.size.add(f.size)]),0===t&&(y=p.map(A),M=f.map(A)),i+=a[i],Number.isNaN(i)||s[s.length-1][0].eq(s[s.length-1][1]))break}return{fractionalChances:s,roundedChances:s.map(t=>{let e=Sa(t,2),a=e[0],i=e[1];return a.multiply(1e6).divide(i).valueOf()/1e6}),remainingHealth:y,remainingHealthBerry:M}}(o,f,b,{initDmgRange:E,initDmgRangeBerry:R,effects:m.values,rechargeTurns:u.requiresRecharge()?1:0,toxicCounter:o.toxicCounter});m.messages=m.messages.slice(1),m.values=m.values.slice(1);const w=[];for(let t=0;t<H.roundedChances.length;t++){const e="".concat(t?t+1:"O","HKO"),a=H.fractionalChances[t];if(a[0].eq(a[1])){0===w.length&&w.push("guaranteed ".concat(e));break}if(!a[0].isZero()){const a=Math.round(1e3*H.roundedChances[t])/10;100===a?w.push("almost guaranteed ".concat(e)):0===a?w.push("negligible chance to ".concat(e)):w.push("".concat(a,"% chance to ").concat(e))}}w.length>0?(l.push(w.join(", ")),m.messages.length>0&&l.push("after",m.messages.join(", "))):l.push("this might take a while..."),o.currentHpRange=H.remainingHealth,o.currentHpRangeBerry=H.remainingHealthBerry;const I=c.join(" "),O=h.join(" "),C=l.join(" ");return{summary:"".concat(I,": ").concat(O," -- ").concat(C),attacker:n,defender:o,move:u,field:s,minPercent:M,maxPercent:g,damages:f.slice(0,f.length-1),damage:f[0],effectValues:m.values,effectMessages:m.messages,fractionalChances:H.fractionalChances,roundedChances:H.roundedChances}}function va(t,e,a){const i=this.berry,s=this.effects,r=this.totalHp,n=this.toxicCounter;let o=!1;for(const e of s){if(t>=r)break;if("toxic"===e?t+=Math.trunc((n+1)*r/16):t=Math.max(0,t-e),void 0!==i){if(t>=r)break;!o&&i.heal>0&&r-t<=i.threshold&&(t=Math.max(0,t-i.heal),o=!0)}}return t=Math.min(r,t),void 0!==i&&o&&(i.dmg.add(t,e),a()),t}a.d(e,"o",function(){return i}),a.d(e,"s",function(){return Aa}),a.d(e,"f",function(){return ve}),a.d(e,"h",function(){return fa}),a.d(e,"a",function(){return Je}),a.d(e,"d",function(){return ea}),a.d(e,"e",function(){return He}),a.d(e,"b",function(){return qe}),a.d(e,"c",function(){return d}),a.d(e,"m",function(){return p}),a.d(e,"p",function(){return f}),a.d(e,"i",function(){return S}),a.d(e,"j",function(){return M}),a.d(e,"r",function(){return g}),a.d(e,"l",function(){return E}),a.d(e,"g",function(){return R}),a.d(e,"q",function(){return T}),a.d(e,"k",function(){return k}),a.d(e,"n",function(){return C})}]]);